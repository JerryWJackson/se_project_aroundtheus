!function(){"use strict";const e={baseUrl:"https://around-api.en.tripleten-services.com/v1",defaultHeaders:{authorization:"ef1674b3-2f84-46ba-ade1-b5216183ce24","Content-Type":"application/json"}},t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},s=document.querySelector("#profile-edit-button"),r=document.querySelector("#add-new-card-button"),i=document.querySelector("#avatar-edit-button"),o=(document.querySelectorAll(".popup"),document.querySelectorAll(".cards__list"),Array.from(document.querySelectorAll(t.formSelector))),n=document.querySelector("#profile-edit-popup"),a=(n.querySelector("#profile-edit-popup-form"),document.querySelector("#add-new-card-popup")),u=(a.querySelector(".popup__form"),document.querySelector("#preview-image-popup"));document.querySelector(".cards__list"),u.querySelector("#preview-image"),u.querySelector(".popup__preview-text"),document.querySelector("#card-template").content.firstElementChild,document.querySelector(".profile__avatar-image"),document.querySelector("#name"),document.querySelector("#about"),n.querySelector("#edit-popup-close-button"),document.querySelector("#title"),document.querySelector("#popup"),a.querySelector("#add-new-card-popup-close-button"),u.querySelector("#preview-image-popup-close-button");class c{constructor(e,t,s,r,i){let{name:o,link:n,_id:a,isLiked:u}=e;this._name=o,this._link=n,this.cardId=a,this.isLiked=u,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteConfirmSubmit=r,this._handleCardLike=i,this._confirmDeleteImagePopup=document.querySelector("#confirm-image-delete-popup"),this._data={location:this._name,link:this._link}}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleCardLike(this)})),this._cardDeleteIcon.addEventListener("click",(()=>{this._handleDeleteConfirmSubmit(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}updateLikeStatus(e){console.log(e),this.isLiked=e,this._renderLikes()}_renderLikes(){this.isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteIcon=this._cardElement.querySelector(".card__delete-icon"),this._cardImage=this._cardElement.querySelector(".card__image"),this.cardLocation=this._cardElement.querySelector(".card__location"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this.cardLocation.textContent=this._name,this._setEventListeners(),this._cardElement}}class l{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._foundInvalid=!1,this._inputElements.forEach((e=>{e.validity.valid||(this._foundInvalid=!0)})),this._foundInvalid?this.disableSubmitButton():this.enableSubmitButton()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class d{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("popup")&&this.close()})),this._closeButton=this._popupElement.querySelector(".popup__close"),this._closeButton.addEventListener("click",(()=>{this.close()}))}}class h extends d{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t,this._inputItems=this._popupForm.querySelectorAll(".popup__input"),this._submitButton=this._popupForm.querySelector(".popup__button"),this._submitButtonValue=this._submitButton.textContent}_getInputValues(){const e={};return this._inputItems.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputItems.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}setLoading(e){this._submitButton.textContent=e}}class p{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const _={};(e=>{o.forEach((t=>{const s=new l(e,t),r=t.id;_[r]=s,s.enableValidation()}))})(t);const m=new class{constructor(){this._baseUrl=e.baseUrl,this._headers=e.defaultHeaders,this._userRoute=`${this._baseUrl}/users/me`,this._cardRoute=`${this._baseUrl}/cards`}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}async _request(e,t){return await fetch(e,t).then(this._checkResponse)}fetchUserInfo(){return this._request(this._userRoute,{headers:this._headers}).catch((e=>{console.error(e)}))}editUserInfo(e){let{name:t,about:s}=e;return this._request(this._userRoute,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).catch((e=>{console.error(e)}))}editUserAvatar(e){return this._request(`${this._userRoute}/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).catch((e=>{console.error(e)}))}async getInitialCards(){return await this._request(`${this._cardRoute}`,{headers:this._headers}).catch((e=>{console.error(e)}))}fetchCurrentCards(){return this._request(`${this._cardRoute}`,{headers:this._headers}).catch((e=>{console.error(e)}))}addCard(e){return this._request(`${this._cardRoute}`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).catch((e=>{console.error(e)}))}deleteCard(e){return this._request(`${this._cardRoute}/${e.cardId}`,{method:"DELETE",headers:this._headers}).catch((e=>{console.error(e)}))}likeCard(e){return this._request(`${this._cardRoute}/${e}/likes`,{method:"PUT",headers:this._headers,body:JSON.stringify({isLiked:!0})}).catch((e=>{console.error(e)}))}dislikeCard(e){return this._request(`${this._cardRoute}/${e}/likes`,{method:"DELETE",headers:this._headers}).catch((e=>{console.error(e)}))}}(e);let S;m.getInitialCards().then((e=>{S=new p({items:e,renderer:e=>{const t=L(e);S.addItem(t)}},".cards__list"),S.renderItems()})).catch((e=>{console.error(e)}));const v=new h("#profile-edit-popup",(function(e){v.setLoading("Saving..."),g.setUserInfo(e),m.editUserInfo(e).then((()=>{v.close()})).finally((()=>v.setLoading("Save")))}));v.setEventListeners();const E=new class extends d{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#preview-image"),this._previewText=this._popupElement.querySelector(".popup__preview-text")}open(e){console.log(e),this._previewImage.src=e.link,this._previewImage.alt=e.location,this._previewText.textContent=e.location,super.open()}}("#preview-image-popup");E.setEventListeners();const f=new h("#add-new-card-popup",(function(e){f.setLoading("Saving...");const t=L(e);S.addItem(t),m.addCard(e).then((()=>{f.close()})).finally((()=>f.setLoading("Create")))}));f.setEventListeners();const b=new class extends d{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#confirm-image-delete-popup-form"),this._handleDeleteConfirmSubmit=t}setSubmitAction(e){this._handleSubmitCallback=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitCallback()})),super.setEventListeners()}}("#confirm-image-delete-popup",q);b.setEventListeners();const y=new h("#change-profile-avatar-popup",(function(e){y.setLoading("Saving..."),g.setUserAvatar(e.link),m.editUserAvatar(e.link).then((()=>{y.close()})).finally((()=>y.setLoading("Save")))}));y.setEventListeners();const g=new class{constructor(e,t,s){this._name=document.querySelector(e),this._about=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}setUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this._about.textContent=s}setUserAvatar(e){this._avatar.src=e}}(".profile__name",".profile__description",".profile__avatar-image");function L(e){return new c(e,"#card-template",k,q,C).getView()}function k(e){E.open(e)}function q(e){b.open(),b.setSubmitAction((()=>{m.deleteCard(e),e.handleDeleteCard(),b.close()}))}function C(e){e.isLiked?m.dislikeCard(e.cardId).then((()=>{e.updateLikeStatus(!1)})):m.likeCard(e.cardId).then((()=>{e.updateLikeStatus(!0)}))}m.fetchUserInfo().then((e=>{let t=e;g.setUserInfo(t.name,t.about),g.setUserAvatar(t.avatar)})),s.addEventListener("click",(()=>{const e=g.getUserInfo();v.setInputValues(e),_["profile-edit-popup-form"].resetValidation(),v.open()})),r.addEventListener("click",(()=>{_["create-place-popup-form"].toggleButtonState(),f.open()})),i.addEventListener("click",(()=>{_["change-profile-avatar-popup-form"].toggleButtonState(),y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ2ZBLEVBQUs1SCxtQkFDTDZJLEVBQW1CMUYsT0FBTyxHQUU5QixDQUVBLFNBQVN4RSxFQUFlaUosR0FDakJBLEVBQUs3SSxRQUtSNEcsRUFBSW9DLFlBQVlILEVBQUt6SSxRQUFRd0gsTUFBSyxLQUNoQ2lCLEVBQUt6SCxrQkFBaUIsRUFBTSxJQUw5QndGLEVBQUltQyxTQUFTRixFQUFLekksUUFBUXdILE1BQUssS0FDN0JpQixFQUFLekgsa0JBQWlCLEVBQUssR0FPakMsQ0F4RUF3RixFQUFJaUIsZ0JBQWdCRCxNQUFNcEMsSUFDeEIsSUFBSWtGLEVBQVdsRixFQUNmOEQsRUFBWUMsWUFBWW1CLEVBQVM3SyxLQUFNNkssRUFBU3ZDLE9BQ2hEbUIsRUFBWWEsY0FBY08sRUFBU2pDLE9BQU8sSUEyRTVDakssRUFBa0JzQyxpQkFBaUIsU0FBUyxLQUMxQyxNQUFNNkosRUFBY3JCLEVBQVltQixjQUNoQ3hMLEVBQWlCc0csZUFBZW9GLEdBQ2hDbEUsRUFBZSwyQkFBMkI3QyxrQkFDMUMzRSxFQUFpQmlGLE1BQU0sSUFHekJ2RixFQUFpQm1DLGlCQUFpQixTQUFTLEtBQ3pDMkYsRUFBZSwyQkFBMkJwRCxvQkFDMUN1RyxFQUFhMUYsTUFBTSxJQUdyQnRGLEVBQWlCa0MsaUJBQWlCLFNBQVMsS0FDekMyRixFQUFlLG9DQUFvQ3BELG9CQUNuRDZHLEVBQXlCaEcsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9BUEkuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lhbCBwdXJwb3NlIG9wdGlvbnMgb25qZWN0cyAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmV4cG9ydCBjb25zdCBhcGlPcHRpb25zID0ge1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGRlZmF1bHRIZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJlZjE2NzRiMy0yZjg0LTQ2YmEtYWRlMS1iNTIxNjE4M2NlMjRcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wIGxldmVsIGJ1dHRvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1uZXctY2FyZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLWVkaXQtYnV0dG9uXCIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYWwgbGlzdCBpdGVtcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5leHBvcnQgY29uc3QgcG9wdXBMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2FyZHNfX2xpc3RcIik7XG5leHBvcnQgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3IpXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LXBvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0UG9wdXBGb3JtID0gcHJvZmlsZUVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWVkaXQtcG9wdXAtZm9ybVwiXG4pO1xuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLW5ldy1jYXJkLXBvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRQb3B1cEZvcm0gPVxuICBhZGROZXdDYXJkUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcblxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLXBvcHVwXCIpO1xuXG5leHBvcnQgY29uc3QgY2FyZExpc3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZSA9IHByZXZpZXdJbWFnZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3VGV4dCA9IHByZXZpZXdJbWFnZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19wcmV2aWV3LXRleHRcIlxuKTtcblxuLy8gVGVtcGxhdGVzXG5leHBvcnQgY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuXG4vLyBET00gTm9kZSBFbGVtZW50c1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBcIi5wcm9maWxlX19uYW1lXCI7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIjtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gXCIucHJvZmlsZV9fYXZhdGFyLWltYWdlXCI7XG5leHBvcnQgY29uc3QgYXZhdGFySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVFZGl0TmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZUVkaXREZXNjcmlwdGlvbklucHV0ID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhYm91dFwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVFZGl0Q2xvc2VCdXR0b24gPSBwcm9maWxlRWRpdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2VkaXQtcG9wdXAtY2xvc2UtYnV0dG9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwb3B1cEFkZE5ld0NhcmROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkTmV3Q2FyZEltYWdlTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZE5ld0NhcmRDbG9zZUJ1dHRvbiA9IGFkZE5ld0NhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKFxuICBcIiNhZGQtbmV3LWNhcmQtcG9wdXAtY2xvc2UtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlcG9wdXBDbG9zZUJ1dHRvbiA9IHByZXZpZXdJbWFnZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3ByZXZpZXctaW1hZ2UtcG9wdXAtY2xvc2UtYnV0dG9uXCJcbik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDb25maXJtU3VibWl0LFxuICAgIGhhbmRsZUNhcmRMaWtlXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuY2FyZElkID0gX2lkO1xuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQgPSBoYW5kbGVEZWxldGVDb25maXJtU3VibWl0O1xuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XG4gICAgdGhpcy5fY29uZmlybURlbGV0ZUltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjY29uZmlybS1pbWFnZS1kZWxldGUtcG9wdXBcIlxuICAgICk7XG4gICAgdGhpcy5fZGF0YSA9IHtcbiAgICAgIGxvY2F0aW9uOiB0aGlzLl9uYW1lLFxuICAgICAgbGluazogdGhpcy5fbGluayxcbiAgICB9O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIGNhcmRfX2xpa2UtYnV0dG9uXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMpO1xuICAgIH0pO1xuICAgIC8vIGNhcmRfX2RlbGV0ZS1idXR0b25cbiAgICB0aGlzLl9jYXJkRGVsZXRlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCh0aGlzKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9kYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgLy8gbGV0IGNhcmRJZCA9IHRoaXMuX2NvbmZpcm1EZWxldGUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gICAgLy8gY29uc29sZS5sb2coJyhiZWZvcmUgcmV0dXJuKSBjYXJkSWQgaXMnLCBjYXJkSWQpO1xuICAgIC8vIHJldHVybiBjYXJkSWQ7XG4gIH1cblxuICB1cGRhdGVMaWtlU3RhdHVzKGlzTGlrZWQpIHtcbiAgICBjb25zb2xlLmxvZyhpc0xpa2VkKTtcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG4gIH1cblxuICBfcmVuZGVyTGlrZXMoKSB7XG4gICAgaWYgKHRoaXMuaXNMaWtlZCkge1xuICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9XG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2NhcmREZWxldGVJY29uID1cbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWljb25cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLmNhcmRMb2NhdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbG9jYXRpb25cIik7XG4gICAgLy8gZ2V0IGNhcmQgdmlld1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuY2FyZExvY2F0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAvL3NldCBldmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIC8vcmV0dXJuIHRoZSBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIHRoaXMuX2ZvdW5kSW52YWxpZCA9IGZhbHNlO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICB0aGlzLl9mb3VuZEludmFsaWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuX2ZvdW5kSW52YWxpZCkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIC8vIG9wZW5zIHBvcHVwXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgLy9jbG9zZXMgcG9wdXBcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG5cbiAgICB0aGlzLl9pbnB1dEl0ZW1zID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblZhbHVlID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRJdGVtcy5mb3JFYWNoKChpbnB1dEl0ZW0pID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0SXRlbS5uYW1lXSA9IGlucHV0SXRlbS52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRJdGVtcy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgc2V0TG9hZGluZyhidXR0b25WYWx1ZSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVmFsdWU7XG4gIH1cblxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgYXBpT3B0aW9ucyxcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBmb3JtTGlzdCxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUF2YXRhcixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIGF2YXRhckVkaXRCdXR0b24sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcFVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvcm0gYWRkIGFuZCBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuLy8gZW5hYmxlIHZhbGlkYXRpb25cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAodmFsaWRhdGlvblNldHRpbmdzKSA9PiB7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5pZDtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uU2V0dGluZ3MpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGUgQVBJIENsaWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpT3B0aW9ucyk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxubGV0IGNhcmRTZWN0aW9uO1xuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmRFbCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBcIi5jYXJkc19fbGlzdFwiXG4gICAgKTtcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIH0pO1xuXG4vLyBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzKSA9PiBjb25zb2xlLmxvZygnaW5pdGlhbENhcmRzIHJldHVybmVkJywgcmVzKSk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3B1cCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRWRpdCBQb3B1cCBGb3JtIFByb2ZpbGUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LXBvcHVwXCIsXG4gIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdFxuKTtcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBvcHVwIFByZXZpZXcgSW1hZ2UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgaW1hZ2VQb3BVcCA9IG5ldyBQb3BVcFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLXBvcHVwXCIpO1xuaW1hZ2VQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUG9wdXAgQWRkIENhcmQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgYWRkQ2FyZFBvcFVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2FkZC1uZXctY2FyZC1wb3B1cFwiLFxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxuKTtcbmFkZENhcmRQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1Qb3B1cCBDb25maXJtIERlbGV0ZS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBcIiNjb25maXJtLWltYWdlLWRlbGV0ZS1wb3B1cFwiLFxuICBoYW5kbGVEZWxldGVDb25maXJtU3VibWl0XG4pO1xuY29uZmlybURlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUNoYW5nZSBQcm9maWxlIEF2YXRhciBQb3B1cC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGNoYW5nZVByb2ZpbGVBdmF0YXJQb3BVcCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNjaGFuZ2UtcHJvZmlsZS1hdmF0YXItcG9wdXBcIixcbiAgaGFuZGxlQ2hhbmdlUHJvZmlsZUF2YXRhckZvcm1TdWJtaXRcbik7XG5jaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgdXNlckluZm9OZXcgPSBuZXcgVXNlckluZm8oXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlRGVzY3JpcHRpb24sXG4gIHByb2ZpbGVBdmF0YXJcbik7XG5cbmFwaS5mZXRjaFVzZXJJbmZvKCkudGhlbigoZGF0YSkgPT4ge1xuICBsZXQgdXNlckRhdGEgPSBkYXRhO1xuICB1c2VySW5mb05ldy5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XG4gIHVzZXJJbmZvTmV3LnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgZGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDb25maXJtU3VibWl0LFxuICAgIGhhbmRsZUNhcmRMaWtlXG4gICk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhkYXRhKSB7XG4gIGltYWdlUG9wVXAub3BlbihkYXRhKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGVGb3JtU3VibWl0KGRhdGEpIHtcbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRMb2FkaW5nKCdTYXZpbmcuLi4nKTtcbiAgdXNlckluZm9OZXcuc2V0VXNlckluZm8oZGF0YSk7XG4gIGFwaS5lZGl0VXNlckluZm8oZGF0YSkudGhlbigoKSA9PiB7XG4gICAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xuICB9KS5maW5hbGx5KCgpID0+IHByb2ZpbGVFZGl0UG9wdXAuc2V0TG9hZGluZygnU2F2ZScpKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2hhbmdlUHJvZmlsZUF2YXRhckZvcm1TdWJtaXQoZGF0YSkge1xuICBjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAuc2V0TG9hZGluZygnU2F2aW5nLi4uJylcbiAgdXNlckluZm9OZXcuc2V0VXNlckF2YXRhcihkYXRhLmxpbmspO1xuICBhcGkuZWRpdFVzZXJBdmF0YXIoZGF0YS5saW5rKS50aGVuKCgpID0+IHtcbiAgICBjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAuY2xvc2UoKTtcbiAgfSkuZmluYWxseSgoKSA9PiBjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAuc2V0TG9hZGluZygnU2F2ZScpKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoZGF0YSkge1xuICBhZGRDYXJkUG9wVXAuc2V0TG9hZGluZygnU2F2aW5nLi4uJyk7XG4gIGNvbnN0IGNhcmRWYWx1ZSA9IHJlbmRlckNhcmQoZGF0YSk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZFZhbHVlKTtcbiAgYXBpXG4gICAgLmFkZENhcmQoZGF0YSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBhZGRDYXJkUG9wVXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IGFkZENhcmRQb3BVcC5zZXRMb2FkaW5nKCdDcmVhdGUnKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQoY2FyZCkge1xuICBjb25maXJtRGVsZXRlUG9wdXAub3BlbigpO1xuICBjb25maXJtRGVsZXRlUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkKTtcbiAgICBjYXJkLmhhbmRsZURlbGV0ZUNhcmQoKTtcbiAgICBjb25maXJtRGVsZXRlUG9wdXAuY2xvc2UoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlKGNhcmQpIHtcbiAgaWYgKCFjYXJkLmlzTGlrZWQpIHtcbiAgICBhcGkubGlrZUNhcmQoY2FyZC5jYXJkSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC51cGRhdGVMaWtlU3RhdHVzKHRydWUpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFwaS5kaXNsaWtlQ2FyZChjYXJkLmNhcmRJZCkudGhlbigoKSA9PiB7XG4gICAgICBjYXJkLnVwZGF0ZUxpa2VTdGF0dXMoZmFsc2UpO1xuICAgIH0pO1xuICB9XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgcHJvZmlsZURhdGEgPSB1c2VySW5mb05ldy5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRWRpdFBvcHVwLnNldElucHV0VmFsdWVzKHByb2ZpbGVEYXRhKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWVkaXQtcG9wdXAtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcImNyZWF0ZS1wbGFjZS1wb3B1cC1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGFkZENhcmRQb3BVcC5vcGVuKCk7XG59KTtcblxuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcImNoYW5nZS1wcm9maWxlLWF2YXRhci1wb3B1cC1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGNoYW5nZVByb2ZpbGVBdmF0YXJQb3BVcC5vcGVuKCk7XG59KTtcblxuLy8gYXBpLmxpa2VDYXJkKGA2NTUyNzY1ZTU5NzU3MzAwMTk5MzE2NDhgKTtcbiIsImltcG9ydCB7IGFwaU9wdGlvbnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIGNvbnN0cnVjdG9yIGJvZHlcbiAgICB0aGlzLl9iYXNlVXJsID0gYXBpT3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBhcGlPcHRpb25zLmRlZmF1bHRIZWFkZXJzO1xuICAgIHRoaXMuX3VzZXJSb3V0ZSA9IGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYDtcbiAgICB0aGlzLl9jYXJkUm91dGUgPSBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2A7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBhc3luYyBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYXdhaXQgZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gVXNlciByb3V0ZSBtZXRob2RzXG5cbiAgZmV0Y2hVc2VySW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCh0aGlzLl91c2VyUm91dGUsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KHRoaXMuX3VzZXJSb3V0ZSwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cbiAgZWRpdFVzZXJBdmF0YXIobGluaykge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX3VzZXJSb3V0ZX0vYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBDYXJkIHJvdXRlIG1ldGhvZHNcbiAgYXN5bmMgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZldGNoQ3VycmVudENhcmRzKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZENhcmQoY2FyZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX1gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkLmxpbmssXG4gICAgICB9KSxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9jYXJkUm91dGV9LyR7Y2FyZC5jYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBsaWtlQ2FyZChpZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX0vJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpc0xpa2VkOiB0cnVlLFxuICAgICAgfSksXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9jYXJkUm91dGV9LyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlXCIpO1xuICAgIHRoaXMuX3ByZXZpZXdUZXh0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cF9fcHJldmlldy10ZXh0XCJcbiAgICApO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gZGF0YS5sb2NhdGlvbjtcbiAgICB0aGlzLl9wcmV2aWV3VGV4dC50ZXh0Q29udGVudCA9IGRhdGEubG9jYXRpb247XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVEZWxldGVDb25maXJtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjY29uZmlybS1pbWFnZS1kZWxldGUtcG9wdXAtZm9ybVwiXG4gICAgKTtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtU3VibWl0ID0gaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdDtcbiAgfVxuXG4gIC8vIHRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbiBmdW5jdGlvbiBhcyBhbiBhcmd1bWVudCwgYW5kIGFzc2lnbnMgaXQgdG8gdGhpc1xuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2sgPSBhY3Rpb247XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBzZXQgZXZlbnQgbGlzdGVuZXIgd2l0aCB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjayBhcyBpdCdzIGhhbmRsZXJcbiAgICAvLyBkb24ndCBmb3JnZXQgdG8gY2FsbCBzdXBlci5zZXRFdmVudExpc3RlbmVyc1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2soKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVKb2JTZWxlY3RvciwgcHJvZmlsZUF2YXRhcikge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUF2YXRhcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMsXG4gICAgfTtcbiAgICAvLyBjb25zb2xlLmxvZyh1c2VyRGF0YSk7XG4gICAgcmV0dXJuIHVzZXJEYXRhO1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImFwaU9wdGlvbnMiLCJiYXNlVXJsIiwiZGVmYXVsdEhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZE5ld0NhcmRCdXR0b24iLCJhdmF0YXJFZGl0QnV0dG9uIiwiZm9ybUxpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiQXJyYXkiLCJmcm9tIiwicHJvZmlsZUVkaXRQb3B1cCIsImFkZE5ld0NhcmRQb3B1cCIsInByZXZpZXdJbWFnZVBvcHVwIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDb25maXJtU3VibWl0IiwiaGFuZGxlQ2FyZExpa2UiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsImNhcmRJZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDb25maXJtU3VibWl0IiwiX2hhbmRsZUNhcmRMaWtlIiwiX2NvbmZpcm1EZWxldGVJbWFnZVBvcHVwIiwiX2RhdGEiLCJsb2NhdGlvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkTGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZERlbGV0ZUljb24iLCJfY2FyZEltYWdlIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsInVwZGF0ZUxpa2VTdGF0dXMiLCJjb25zb2xlIiwibG9nIiwiX3JlbmRlckxpa2VzIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2dldFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsImNhcmRMb2NhdGlvbiIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxlbWVudHMiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9mb3VuZEludmFsaWQiLCJmb3JFYWNoIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImVuYWJsZVN1Ym1pdEJ1dHRvbiIsImUiLCJkaXNhYmxlZCIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9jbG9zZUJ1dHRvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRJdGVtcyIsIl9zdWJtaXRCdXR0b25WYWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXRJdGVtIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJpbnB1dCIsInJlc2V0Iiwic2V0TG9hZGluZyIsImJ1dHRvblZhbHVlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJmb3JtVmFsaWRhdG9ycyIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiYXBpIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl91c2VyUm91dGUiLCJfY2FyZFJvdXRlIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiZmV0Y2hVc2VySW5mbyIsImhlYWRlcnMiLCJjYXRjaCIsImVyciIsImVycm9yIiwiZWRpdFVzZXJJbmZvIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRVc2VyQXZhdGFyIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2hDdXJyZW50Q2FyZHMiLCJhZGRDYXJkIiwiY2FyZCIsImRlbGV0ZUNhcmQiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwiY2FyZFNlY3Rpb24iLCJjYXJkcyIsImNhcmREYXRhIiwiY2FyZEVsIiwicmVuZGVyQ2FyZCIsInVzZXJJbmZvTmV3Iiwic2V0VXNlckluZm8iLCJmaW5hbGx5IiwiaW1hZ2VQb3BVcCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld1RleHQiLCJhZGRDYXJkUG9wVXAiLCJjYXJkVmFsdWUiLCJjb25maXJtRGVsZXRlUG9wdXAiLCJzZXRTdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJfaGFuZGxlU3VibWl0Q2FsbGJhY2siLCJjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAiLCJzZXRVc2VyQXZhdGFyIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVKb2JTZWxlY3RvciIsInByb2ZpbGVBdmF0YXIiLCJfYWJvdXQiLCJfYXZhdGFyIiwiZ2V0VXNlckluZm8iLCJ1c2VyRGF0YSIsInByb2ZpbGVEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==