!function(){"use strict";const e={baseUrl:"https://around-api.en.tripleten-services.com/v1",defaultHeaders:{authorization:"ef1674b3-2f84-46ba-ade1-b5216183ce24","Content-Type":"application/json"}},t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},s=document.querySelector("#profile-edit-button"),r=document.querySelector("#add-new-card-button"),i=document.querySelector("#avatar-edit-button"),o=(document.querySelectorAll(".popup"),document.querySelectorAll(".cards__list"),Array.from(document.querySelectorAll(t.formSelector))),n=document.querySelector("#profile-edit-popup"),a=(n.querySelector("#profile-edit-popup-form"),document.querySelector("#add-new-card-popup")),c=(a.querySelector(".popup__form"),document.querySelector("#preview-image-popup"));document.querySelector(".cards__list"),c.querySelector("#preview-image"),c.querySelector(".popup__preview-text"),document.querySelector("#card-template").content.firstElementChild,document.querySelector(".profile__avatar-image"),document.querySelector("#name"),document.querySelector("#about"),n.querySelector("#edit-popup-close-button"),document.querySelector("#title"),document.querySelector("#popup"),a.querySelector("#add-new-card-popup-close-button"),c.querySelector("#preview-image-popup-close-button");class u{constructor(e,t,s,r,i){let{name:o,link:n,_id:a,isLiked:c}=e;this._name=o,this._link=n,this.cardId=a,this.isLiked=c,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteConfirmSubmit=r,this._handleCardLike=i,this._confirmDeleteImagePopup=document.querySelector("#confirm-image-delete-popup"),this._data={location:this._name,link:this._link}}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleCardLike(this)})),this._cardDeleteIcon.addEventListener("click",(()=>{this._handleDeleteConfirmSubmit(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}updateLikeStatus(e){console.log(e),this.isLiked=e,this._renderLikes()}_renderLikes(){this.isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteIcon=this._cardElement.querySelector(".card__delete-icon"),this._cardImage=this._cardElement.querySelector(".card__image"),this.cardLocation=this._cardElement.querySelector(".card__location"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this.cardLocation.textContent=this._name,this._setEventListeners(),this._cardElement}}class l{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._foundInvalid=!1,this._inputElements.forEach((e=>{e.validity.valid||(this._foundInvalid=!0)})),this._foundInvalid?this.disableSubmitButton():this.enableSubmitButton()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class d{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("popup")&&this.close()})),this._closeButton=this._popupElement.querySelector(".popup__close"),this._closeButton.addEventListener("click",(()=>{this.close()}))}}class h extends d{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t,this._inputItems=this._popupForm.querySelectorAll(".popup__input"),this._submitButton=this._popupForm.querySelector(".popup__button"),this._submitButtonValue=this._submitButton.textContent}_getInputValues(){const e={};return this._inputItems.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputItems.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}setLoading(e){this._submitButton.textContent=e}}class p{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const _={};(e=>{o.forEach((t=>{const s=new l(e,t),r=t.id;_[r]=s,s.enableValidation()}))})(t);const m=new class{constructor(){this._baseUrl=e.baseUrl,this._headers=e.defaultHeaders,this._userRoute=`${this._baseUrl}/users/me`,this._cardRoute=`${this._baseUrl}/cards`}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}async _request(e,t){return await fetch(e,t).then(this._checkResponse)}fetchUserInfo(){return this._request(this._userRoute,{headers:this._headers}).catch((e=>{console.error(e)}))}editUserInfo(e){let{name:t,about:s}=e;return this._request(this._userRoute,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).catch((e=>{console.error(e)}))}editUserAvatar(e){return this._request(`${this._userRoute}/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).catch((e=>{console.error(e)}))}async getInitialCards(){return await this._request(`${this._cardRoute}`,{headers:this._headers}).catch((e=>{console.error(e)}))}fetchCurrentCards(){return this._request(`${this._cardRoute}`,{headers:this._headers}).catch((e=>{console.error(e)}))}addCard(e){return this._request(`${this._cardRoute}`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).catch((e=>{console.error(e)}))}deleteCard(e){return this._request(`${this._cardRoute}/${e.cardId}`,{method:"DELETE",headers:this._headers}).catch((e=>{console.error(e)}))}likeCard(e){return this._request(`${this._cardRoute}/${e}/likes`,{method:"PUT",headers:this._headers,body:JSON.stringify({isLiked:!0})}).catch((e=>{console.error(e)}))}dislikeCard(e){return this._request(`${this._cardRoute}/${e}/likes`,{method:"DELETE",headers:this._headers}).catch((e=>{console.error(e)}))}}(e);let S;m.getInitialCards().then((e=>{S=new p({items:e,renderer:e=>{const t=L(e);S.addItem(t)}},".cards__list"),S.renderItems()})).catch((e=>{console.error(e)}));const v=new h("#profile-edit-popup",(function(e){v.setLoading("Saving..."),g.setUserInfo(e),m.editUserInfo(e).then((()=>{v.close()})).finally((()=>v.setLoading("Save")))}));v.setEventListeners();const E=new class extends d{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#preview-image"),this._previewText=this._popupElement.querySelector(".popup__preview-text")}open(e){console.log(e),this._previewImage.src=e.link,this._previewImage.alt=e.location,this._previewText.textContent=e.location,super.open()}}("#preview-image-popup");E.setEventListeners();const f=new h("#add-new-card-popup",(function(e){f.setLoading("Saving...");const t=L(e);S.addItem(t),m.addCard(e).then((()=>{f.close()})).finally((()=>f.setLoading("Create")))}));f.setEventListeners();const b=new class extends d{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#confirm-image-delete-popup-form"),this._handleDeleteConfirmSubmit=t}setSubmitAction(e){this._handleSubmitCallback=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitCallback()})),super.setEventListeners()}}("#confirm-image-delete-popup",q);b.setEventListeners();const y=new h("#change-profile-avatar-popup",(function(e){y.setLoading("Saving..."),g.setUserAvatar(e.link),m.editUserAvatar(e.link).then((()=>{y.close()})).finally((()=>y.setLoading("Save")))}));y.setEventListeners();const g=new class{constructor(e,t,s){this._name=document.querySelector(e),this._about=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}setUserInfo(e,t){this._name.textContent=e,this._about.textContent=t}setUserAvatar(e){this._avatar.src=e}}(".profile__name",".profile__description",".profile__avatar-image");function L(e){return new u(e,"#card-template",k,q,C).getView()}function k(e){E.open(e)}function q(e){b.open(),b.setSubmitAction((()=>{m.deleteCard(e),e.handleDeleteCard(),b.close()}))}function C(e){e.isLiked?m.dislikeCard(e.cardId).then((()=>{e.updateLikeStatus(!1)})):m.likeCard(e.cardId).then((()=>{e.updateLikeStatus(!0)}))}m.fetchUserInfo().then((e=>{let t=e;g.setUserInfo(t.name,t.about),g.setUserAvatar(t.avatar)})),s.addEventListener("click",(()=>{const e=g.getUserInfo();v.setInputValues(e),_["profile-edit-popup-form"].resetValidation(),v.open()})),r.addEventListener("click",(()=>{_["create-place-popup-form"].toggleButtonState(),f.open()})),i.addEventListener("click",(()=>{_["change-profile-avatar-popup-form"].toggleButtonState(),y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8sR0FFOUIsQ0FFQSxTQUFTeEUsRUFBZWlKLEdBQ2pCQSxFQUFLN0ksUUFLUjRHLEVBQUlvQyxZQUFZSCxFQUFLekksUUFBUXdILE1BQUssS0FDaENpQixFQUFLekgsa0JBQWlCLEVBQU0sSUFMOUJ3RixFQUFJbUMsU0FBU0YsRUFBS3pJLFFBQVF3SCxNQUFLLEtBQzdCaUIsRUFBS3pILGtCQUFpQixFQUFLLEdBT2pDLENBeEVBd0YsRUFBSWlCLGdCQUFnQkQsTUFBTXBDLElBQ3hCLElBQUlrRixFQUFXbEYsRUFDZjhELEVBQVlDLFlBQVltQixFQUFTN0ssS0FBTTZLLEVBQVN2QyxPQUNoRG1CLEVBQVlhLGNBQWNPLEVBQVNqQyxPQUFPLElBMkU1Q2pLLEVBQWtCc0MsaUJBQWlCLFNBQVMsS0FDMUMsTUFBTTZKLEVBQWNyQixFQUFZbUIsY0FDaEN4TCxFQUFpQnNHLGVBQWVvRixHQUNoQ2xFLEVBQWUsMkJBQTJCN0Msa0JBQzFDM0UsRUFBaUJpRixNQUFNLElBR3pCdkYsRUFBaUJtQyxpQkFBaUIsU0FBUyxLQUN6QzJGLEVBQWUsMkJBQTJCcEQsb0JBQzFDdUcsRUFBYTFGLE1BQU0sSUFHckJ0RixFQUFpQmtDLGlCQUFpQixTQUFTLEtBQ3pDMkYsRUFBZSxvQ0FBb0NwRCxvQkFDbkQ2RyxFQUF5QmhHLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgIHNwZWNpYWwgcHVycG9zZSBvcHRpb25zIG9uamVjdHMgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5leHBvcnQgY29uc3QgYXBpT3B0aW9ucyA9IHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBkZWZhdWx0SGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiZWYxNjc0YjMtMmY4NC00NmJhLWFkZTEtYjUyMTYxODNjZTI0XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCBsZXZlbCBidXR0b25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbmV3LWNhcmQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1lZGl0LWJ1dHRvblwiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmFsIGxpc3QgaXRlbXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZXhwb3J0IGNvbnN0IHBvcHVwTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcmRzX19saXN0XCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVNlbGVjdG9yKVxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdFBvcHVwRm9ybSA9IHByb2ZpbGVFZGl0UG9wdXAucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1lZGl0LXBvcHVwLWZvcm1cIlxuKTtcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1uZXctY2FyZC1wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkUG9wdXBGb3JtID1cbiAgYWRkTmV3Q2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG5cbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1wb3B1cFwiKTtcblxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2UgPSBwcmV2aWV3SW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcHJldmlld1RleHQgPSBwcmV2aWV3SW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fcHJldmlldy10ZXh0XCJcbik7XG5cbi8vIFRlbXBsYXRlc1xuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcblxuLy8gRE9NIE5vZGUgRWxlbWVudHNcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gXCIucHJvZmlsZV9fbmFtZVwiO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCI7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiO1xuZXhwb3J0IGNvbnN0IGF2YXRhckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlRWRpdE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVFZGl0RGVzY3JpcHRpb25JbnB1dCA9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXRcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlRWRpdENsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKFxuICBcIiNlZGl0LXBvcHVwLWNsb3NlLWJ1dHRvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgcG9wdXBBZGROZXdDYXJkTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZE5ld0NhcmRJbWFnZUxpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBcIik7XG5leHBvcnQgY29uc3QgcG9wdXBBZGROZXdDYXJkQ2xvc2VCdXR0b24gPSBhZGROZXdDYXJkUG9wdXAucXVlcnlTZWxlY3RvcihcbiAgXCIjYWRkLW5ldy1jYXJkLXBvcHVwLWNsb3NlLWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZXBvcHVwQ2xvc2VCdXR0b24gPSBwcmV2aWV3SW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcmV2aWV3LWltYWdlLXBvcHVwLWNsb3NlLWJ1dHRvblwiXG4pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBpc0xpa2VkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCxcbiAgICBoYW5kbGVDYXJkTGlrZVxuICApIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLmNhcmRJZCA9IF9pZDtcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtU3VibWl0ID0gaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xuICAgIHRoaXMuX2NvbmZpcm1EZWxldGVJbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI2NvbmZpcm0taW1hZ2UtZGVsZXRlLXBvcHVwXCJcbiAgICApO1xuICAgIHRoaXMuX2RhdGEgPSB7XG4gICAgICBsb2NhdGlvbjogdGhpcy5fbmFtZSxcbiAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgfTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBjYXJkX19saWtlLWJ1dHRvblxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSh0aGlzKTtcbiAgICB9KTtcbiAgICAvLyBjYXJkX19kZWxldGUtYnV0dG9uXG4gICAgdGhpcy5fY2FyZERlbGV0ZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQodGhpcyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIC8vIGxldCBjYXJkSWQgPSB0aGlzLl9jb25maXJtRGVsZXRlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICAgIC8vIGNvbnNvbGUubG9nKCcoYmVmb3JlIHJldHVybikgY2FyZElkIGlzJywgY2FyZElkKTtcbiAgICAvLyByZXR1cm4gY2FyZElkO1xuICB9XG5cbiAgdXBkYXRlTGlrZVN0YXR1cyhpc0xpa2VkKSB7XG4gICAgY29uc29sZS5sb2coaXNMaWtlZCk7XG4gICAgdGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xuICB9XG5cbiAgX3JlbmRlckxpa2VzKCkge1xuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPVxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkRGVsZXRlSWNvbiA9XG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1pY29uXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5jYXJkTG9jYXRpb24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xvY2F0aW9uXCIpO1xuICAgIC8vIGdldCBjYXJkIHZpZXdcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLmNhcmRMb2NhdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgLy9zZXQgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAvL3JldHVybiB0aGUgY2FyZFxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICB0aGlzLl9mb3VuZEludmFsaWQgPSBmYWxzZTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgdGhpcy5fZm91bmRJbnZhbGlkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLl9mb3VuZEludmFsaWQpIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBlbmFibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICAvLyBvcGVucyBwb3B1cFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIC8vY2xvc2VzIHBvcHVwXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuXG4gICAgdGhpcy5faW5wdXRJdGVtcyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25WYWx1ZSA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0SXRlbXMuZm9yRWFjaCgoaW5wdXRJdGVtKSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dEl0ZW0ubmFtZV0gPSBpbnB1dEl0ZW0udmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0SXRlbXMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHNldExvYWRpbmcoYnV0dG9uVmFsdWUpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblZhbHVlO1xuICB9XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGFwaU9wdGlvbnMsXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgZm9ybUxpc3QsXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlRGVzY3JpcHRpb24sXG4gIHByb2ZpbGVBdmF0YXIsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBhZGROZXdDYXJkQnV0dG9uLFxuICBhdmF0YXJFZGl0QnV0dG9uLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3BVcFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JtIGFkZCBhbmQgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbi8vIGVuYWJsZSB2YWxpZGF0aW9uXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHZhbGlkYXRpb25TZXR0aW5ncykgPT4ge1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuaWQ7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlIEFQSSBDbGllbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaU9wdGlvbnMpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmxldCBjYXJkU2VjdGlvbjtcblxuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigoY2FyZHMpID0+IHtcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogY2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkRWwgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxuICAgICk7XG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9KTtcblxuLy8gYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKHJlcykgPT4gY29uc29sZS5sb2coJ2luaXRpYWxDYXJkcyByZXR1cm5lZCcsIHJlcykpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9wdXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVkaXQgUG9wdXAgRm9ybSBQcm9maWxlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1wb3B1cFwiLFxuICBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXRcbik7XG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQb3B1cCBQcmV2aWV3IEltYWdlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGltYWdlUG9wVXAgPSBuZXcgUG9wVXBXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZS1wb3B1cFwiKTtcbmltYWdlUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBvcHVwIEFkZCBDYXJkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGFkZENhcmRQb3BVcCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhZGQtbmV3LWNhcmQtcG9wdXBcIixcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcbik7XG5hZGRDYXJkUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tUG9wdXAgQ29uZmlybSBEZWxldGUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgY29uZmlybURlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcbiAgXCIjY29uZmlybS1pbWFnZS1kZWxldGUtcG9wdXBcIixcbiAgaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdFxuKTtcbmNvbmZpcm1EZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1DaGFuZ2UgUHJvZmlsZSBBdmF0YXIgUG9wdXAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjY2hhbmdlLXByb2ZpbGUtYXZhdGFyLXBvcHVwXCIsXG4gIGhhbmRsZUNoYW5nZVByb2ZpbGVBdmF0YXJGb3JtU3VibWl0XG4pO1xuY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvTmV3ID0gbmV3IFVzZXJJbmZvKFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlQXZhdGFyXG4pO1xuXG5hcGkuZmV0Y2hVc2VySW5mbygpLnRoZW4oKGRhdGEpID0+IHtcbiAgbGV0IHVzZXJEYXRhID0gZGF0YTtcbiAgdXNlckluZm9OZXcuc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xuICB1c2VySW5mb05ldy5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGRhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCxcbiAgICBoYW5kbGVDYXJkTGlrZVxuICApO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xuICBpbWFnZVBvcFVwLm9wZW4oZGF0YSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XG4gIHByb2ZpbGVFZGl0UG9wdXAuc2V0TG9hZGluZygnU2F2aW5nLi4uJyk7XG4gIHVzZXJJbmZvTmV3LnNldFVzZXJJbmZvKGRhdGEpO1xuICBhcGkuZWRpdFVzZXJJbmZvKGRhdGEpLnRoZW4oKCkgPT4ge1xuICAgIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcbiAgfSkuZmluYWxseSgoKSA9PiBwcm9maWxlRWRpdFBvcHVwLnNldExvYWRpbmcoJ1NhdmUnKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNoYW5nZVByb2ZpbGVBdmF0YXJGb3JtU3VibWl0KGRhdGEpIHtcbiAgY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwLnNldExvYWRpbmcoJ1NhdmluZy4uLicpXG4gIHVzZXJJbmZvTmV3LnNldFVzZXJBdmF0YXIoZGF0YS5saW5rKTtcbiAgYXBpLmVkaXRVc2VyQXZhdGFyKGRhdGEubGluaykudGhlbigoKSA9PiB7XG4gICAgY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwLmNsb3NlKCk7XG4gIH0pLmZpbmFsbHkoKCkgPT4gY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwLnNldExvYWRpbmcoJ1NhdmUnKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGRhdGEpIHtcbiAgYWRkQ2FyZFBvcFVwLnNldExvYWRpbmcoJ1NhdmluZy4uLicpO1xuICBjb25zdCBjYXJkVmFsdWUgPSByZW5kZXJDYXJkKGRhdGEpO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRWYWx1ZSk7XG4gIGFwaVxuICAgIC5hZGRDYXJkKGRhdGEpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgYWRkQ2FyZFBvcFVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiBhZGRDYXJkUG9wVXAuc2V0TG9hZGluZygnQ3JlYXRlJykpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDb25maXJtU3VibWl0KGNhcmQpIHtcbiAgY29uZmlybURlbGV0ZVBvcHVwLm9wZW4oKTtcbiAgY29uZmlybURlbGV0ZVBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZCk7XG4gICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgY29uZmlybURlbGV0ZVBvcHVwLmNsb3NlKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkTGlrZShjYXJkKSB7XG4gIGlmICghY2FyZC5pc0xpa2VkKSB7XG4gICAgYXBpLmxpa2VDYXJkKGNhcmQuY2FyZElkKS50aGVuKCgpID0+IHtcbiAgICAgIGNhcmQudXBkYXRlTGlrZVN0YXR1cyh0cnVlKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBhcGkuZGlzbGlrZUNhcmQoY2FyZC5jYXJkSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC51cGRhdGVMaWtlU3RhdHVzKGZhbHNlKTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHByb2ZpbGVEYXRhID0gdXNlckluZm9OZXcuZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyhwcm9maWxlRGF0YSk7XG4gIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZS1lZGl0LXBvcHVwLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJjcmVhdGUtcGxhY2UtcG9wdXAtZm9ybVwiXS50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBhZGRDYXJkUG9wVXAub3BlbigpO1xufSk7XG5cbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJjaGFuZ2UtcHJvZmlsZS1hdmF0YXItcG9wdXAtZm9ybVwiXS50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAub3BlbigpO1xufSk7XG5cbi8vIGFwaS5saWtlQ2FyZChgNjU1Mjc2NWU1OTc1NzMwMDE5OTMxNjQ4YCk7XG4iLCJpbXBvcnQgeyBhcGlPcHRpb25zIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBjb25zdHJ1Y3RvciBib2R5XG4gICAgdGhpcy5fYmFzZVVybCA9IGFwaU9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gYXBpT3B0aW9ucy5kZWZhdWx0SGVhZGVycztcbiAgICB0aGlzLl91c2VyUm91dGUgPSBgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWA7XG4gICAgdGhpcy5fY2FyZFJvdXRlID0gYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgYXN5bmMgX3JlcXVlc3QodXJsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF3YWl0IGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIC8vIFVzZXIgcm91dGUgbWV0aG9kc1xuXG4gIGZldGNoVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fdXNlclJvdXRlLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCh0aGlzLl91c2VyUm91dGUsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG4gIGVkaXRVc2VyQXZhdGFyKGxpbmspIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl91c2VyUm91dGV9L2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxuICAgICAgfSksXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQ2FyZCByb3V0ZSBtZXRob2RzXG4gIGFzeW5jIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9jYXJkUm91dGV9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBmZXRjaEN1cnJlbnRDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9jYXJkUm91dGV9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBhZGRDYXJkKGNhcmQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9jYXJkUm91dGV9YCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmQubmFtZSxcbiAgICAgICAgbGluazogY2FyZC5saW5rLFxuICAgICAgfSksXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fY2FyZFJvdXRlfS8ke2NhcmQuY2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9jYXJkUm91dGV9LyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaXNMaWtlZDogdHJ1ZSxcbiAgICAgIH0pLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fY2FyZFJvdXRlfS8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZVwiKTtcbiAgICB0aGlzLl9wcmV2aWV3VGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX3ByZXZpZXctdGV4dFwiXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IGRhdGEubG9jYXRpb247XG4gICAgdGhpcy5fcHJldmlld1RleHQudGV4dENvbnRlbnQgPSBkYXRhLmxvY2F0aW9uO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI2NvbmZpcm0taW1hZ2UtZGVsZXRlLXBvcHVwLWZvcm1cIlxuICAgICk7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCA9IGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQ7XG4gIH1cblxuICAvLyB0aGlzIGZ1bmN0aW9uIGFjY2VwdHMgYW4gZnVuY3Rpb24gYXMgYW4gYXJndW1lbnQsIGFuZCBhc3NpZ25zIGl0IHRvIHRoaXNcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gc2V0IGV2ZW50IGxpc3RlbmVyIHdpdGggdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2sgYXMgaXQncyBoYW5kbGVyXG4gICAgLy8gZG9uJ3QgZm9yZ2V0IHRvIGNhbGwgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnNcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrKCk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlSm9iU2VsZWN0b3IsIHByb2ZpbGVBdmF0YXIpIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxuICAgIH07XG4gICAgLy8gY29uc29sZS5sb2codXNlckRhdGEpO1xuICAgIHJldHVybiB1c2VyRGF0YTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImFwaU9wdGlvbnMiLCJiYXNlVXJsIiwiZGVmYXVsdEhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZE5ld0NhcmRCdXR0b24iLCJhdmF0YXJFZGl0QnV0dG9uIiwiZm9ybUxpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiQXJyYXkiLCJmcm9tIiwicHJvZmlsZUVkaXRQb3B1cCIsImFkZE5ld0NhcmRQb3B1cCIsInByZXZpZXdJbWFnZVBvcHVwIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDb25maXJtU3VibWl0IiwiaGFuZGxlQ2FyZExpa2UiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsImNhcmRJZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDb25maXJtU3VibWl0IiwiX2hhbmRsZUNhcmRMaWtlIiwiX2NvbmZpcm1EZWxldGVJbWFnZVBvcHVwIiwiX2RhdGEiLCJsb2NhdGlvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkTGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZERlbGV0ZUljb24iLCJfY2FyZEltYWdlIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsInVwZGF0ZUxpa2VTdGF0dXMiLCJjb25zb2xlIiwibG9nIiwiX3JlbmRlckxpa2VzIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2dldFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsImNhcmRMb2NhdGlvbiIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxlbWVudHMiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9mb3VuZEludmFsaWQiLCJmb3JFYWNoIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImVuYWJsZVN1Ym1pdEJ1dHRvbiIsImUiLCJkaXNhYmxlZCIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9jbG9zZUJ1dHRvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRJdGVtcyIsIl9zdWJtaXRCdXR0b25WYWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXRJdGVtIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJpbnB1dCIsInJlc2V0Iiwic2V0TG9hZGluZyIsImJ1dHRvblZhbHVlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJmb3JtVmFsaWRhdG9ycyIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiYXBpIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl91c2VyUm91dGUiLCJfY2FyZFJvdXRlIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiZmV0Y2hVc2VySW5mbyIsImhlYWRlcnMiLCJjYXRjaCIsImVyciIsImVycm9yIiwiZWRpdFVzZXJJbmZvIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRVc2VyQXZhdGFyIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2hDdXJyZW50Q2FyZHMiLCJhZGRDYXJkIiwiY2FyZCIsImRlbGV0ZUNhcmQiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwiY2FyZFNlY3Rpb24iLCJjYXJkcyIsImNhcmREYXRhIiwiY2FyZEVsIiwicmVuZGVyQ2FyZCIsInVzZXJJbmZvTmV3Iiwic2V0VXNlckluZm8iLCJmaW5hbGx5IiwiaW1hZ2VQb3BVcCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld1RleHQiLCJhZGRDYXJkUG9wVXAiLCJjYXJkVmFsdWUiLCJjb25maXJtRGVsZXRlUG9wdXAiLCJzZXRTdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJfaGFuZGxlU3VibWl0Q2FsbGJhY2siLCJjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAiLCJzZXRVc2VyQXZhdGFyIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVKb2JTZWxlY3RvciIsInByb2ZpbGVBdmF0YXIiLCJfYWJvdXQiLCJfYXZhdGFyIiwiZ2V0VXNlckluZm8iLCJ1c2VyRGF0YSIsInByb2ZpbGVEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==