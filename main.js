!function(){"use strict";const e={baseUrl:"https://around-api.en.tripleten-services.com/v1",defaultHeaders:{authorization:"ef1674b3-2f84-46ba-ade1-b5216183ce24","Content-Type":"application/json"}},t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},s=document.querySelector("#profile-edit-button"),r=document.querySelector("#add-new-card-button"),o=(document.querySelectorAll(".popup"),document.querySelectorAll(".cards__list"),Array.from(document.querySelectorAll(t.formSelector))),i=document.querySelector("#profile-edit-popup"),n=(i.querySelector("#profile-edit-popup-form"),document.querySelector("#add-new-card-popup")),a=(n.querySelector(".popup__form"),document.querySelector("#preview-image-popup")),c=(document.querySelector(".cards__list"),a.querySelector("#preview-image"),a.querySelector(".popup__preview-text"),document.querySelector("#card-template").content.firstElementChild,document.querySelector(".profile__avatar-image"));document.querySelector("#name"),document.querySelector("#about"),i.querySelector("#edit-popup-close-button"),document.querySelector("#title"),document.querySelector("#popup"),n.querySelector("#add-new-card-popup-close-button"),a.querySelector("#preview-image-popup-close-button");class l{constructor(e,t,s,r,o){let{name:i,link:n,_id:a,isLiked:c}=e;this._name=i,this._link=n,this.cardId=a,this.isLiked=c,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteConfirmSubmit=r,this._handleCardLike=o,this._confirmDeleteImagePopup=document.querySelector("#confirm-image-delete-popup"),this._data={location:this._name,link:this._link}}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleCardLike(this)})),this._cardDeleteIcon.addEventListener("click",(()=>{this._handleDeleteConfirmSubmit(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}updateLikeStatus(e){this.isLiked=e,this._renderLikes()}_renderLikes(){this.isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}getId(){return this.id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteIcon=this._cardElement.querySelector(".card__delete-icon"),this._cardImage=this._cardElement.querySelector(".card__image"),this.cardLocation=this._cardElement.querySelector(".card__location"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this.cardLocation.textContent=this._name,this._setEventListeners(),this._cardElement}}class u{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._foundInvalid=!1,this._inputElements.forEach((e=>{e.validity.valid||(this._foundInvalid=!0)})),this._foundInvalid?this.disableSubmitButton():this.enableSubmitButton()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{console.log(e),this._hideInputError(e)}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class d{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("popup")&&this.close()})),this._closeButton=this._popupElement.querySelector(".popup__close"),this._closeButton.addEventListener("click",(()=>{this.close()}))}}class h extends d{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t,this._inputItems=this._popupForm.querySelectorAll(".popup__input")}_getInputValues(){const e={};return this._inputItems.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){console.log(e),this._inputItems.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}class p{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const _={};(e=>{o.forEach((t=>{const s=new u(e,t),r=t.id;_[r]=s,s.enableValidation()}))})(t);const m=new class{constructor(){this._baseUrl=e.baseUrl,this._headers=e.defaultHeaders,this._userRoute=`${this._baseUrl}/users/me`,this._cardRoute=`${this._baseUrl}/cards`}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}async _request(e,t){return await fetch(e,t).then(this._checkResponse)}fetchUserInfo(){return this._request(this._userRoute,{headers:this._headers}).catch((e=>{console.error(e)}))}editUserInfo(e){let{name:t,about:s}=e;return this._request(this._userRoute,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).catch((e=>{console.error(e)}))}editUserAvatar(e){return console.log("(inside setUserAvatar()",e),this._request(`${this._userRoute}/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).catch((e=>{console.error(e)}))}async getInitialCards(){return await this._request(`${this._cardRoute}`,{headers:this._headers}).catch((e=>{console.error(e)}))}fetchCurrentCards(){return this._request(`${this._cardRoute}`,{headers:this._headers}).catch((e=>{console.error(e)}))}addCard(e){return this._request(`${this._cardRoute}`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).catch((e=>{console.error(e)}))}deleteCard(e){return console.log(e),this._request(`${this._cardRoute}/${e.cardId}`,{method:"DELETE",headers:this._headers}).catch((e=>{console.error(e)}))}likeCard(e){return console.log("likeCard fired!"),this._request(`${this._cardRoute}/${e}/likes`,{method:"PUT",headers:this._headers,body:JSON.stringify({isLiked:!0})}).catch((e=>{console.error(e)}))}dislikeCard(e){return console.log("dislikeCard fired!"),this._request(`${this._cardRoute}/${e}/likes`,{method:"DELETE",headers:this._headers}).catch((e=>{console.error(e)}))}}(e);let v;m.getInitialCards().then((e=>{v=new p({items:e,renderer:e=>{const t=L(e);v.addItem(t)}},".cards__list"),v.renderItems()})).catch((e=>{console.error(e)}));const S=new h("#profile-edit-popup",(function(e){y.setUserInfo(e),m.editUserInfo(e),S.close()}));S.setEventListeners();const E=new class extends d{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#preview-image"),this._previewText=this._popupElement.querySelector(".popup__preview-text")}open(e){console.log(e),this._previewImage.src=e.link,this._previewImage.alt=e.location,this._previewText.textContent=e.location,super.open()}}("#preview-image-popup");E.setEventListeners();const f=new h("#add-new-card-popup",(function(e){const t=L(e);v.addItem(t),m.addCard(e),f.close()}));f.setEventListeners();const b=new class extends d{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#confirm-image-delete-popup-form"),this._handleDeleteConfirmSubmit=t}setSubmitAction(e){this._handleSubmitCallback=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitCallback()})),super.setEventListeners()}}("#confirm-image-delete-popup",C);b.setEventListeners();const g=new h("#change-profile-avatar-popup",(function(e){console.log(e.link),y.setUserAvatar(e.link),m.editUserAvatar(e.link),g.close()}));g.setEventListeners();const y=new class{constructor(e,t,s){this._name=document.querySelector(e),this._about=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}setUserInfo(e,t){this._name.textContent=e,this._about.textContent=t}setUserAvatar(e){console.log(e),this._avatar.src=e}}(".profile__name",".profile__description",".profile__avatar-image");function L(e){return new l(e,"#card-template",k,C,q).getView()}function k(e){E.open(e)}function C(e){console.log(e),b.open(),b.setSubmitAction((()=>{m.deleteCard(e),e.handleDeleteCard(),b.close()}))}function q(e){console.log("card is",e),e.isLiked?m.dislikeCard(e.cardId).then((()=>{e.updateLikeStatus(!1)})):m.likeCard(e.cardId).then((()=>{e.updateLikeStatus(!0)}))}m.fetchUserInfo().then((e=>{let t=e;y.setUserInfo(t.name,t.about),y.setUserAvatar(t.avatar)})),s.addEventListener("click",(()=>{const e=y.getUserInfo();S.setInputValues(e),_["profile-edit-popup-form"].resetValidation(),S.open()})),r.addEventListener("click",(()=>{_["create-place-popup-form"].toggleButtonState(),f.open()})),c.addEventListener("click",(()=>{_["change-profile-avatar-popup-form"].toggleButtonState(),g.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUltQyxTQUFTRixFQUFLdkksUUFBUXNILE1BQUssS0FDN0JpQixFQUFLdkgsa0JBQWlCLEVBQUssR0FPakMsQ0FsRUFzRixFQUFJaUIsZ0JBQWdCRCxNQUFNbEMsSUFDeEIsSUFBSStFLEVBQVcvRSxFQUNmNEQsRUFBWUMsWUFBWWtCLEVBQVMxSyxLQUFNMEssRUFBU3RDLE9BQ2hEbUIsRUFBWVksY0FBY08sRUFBU2hDLE9BQU8sSUFxRTVDL0osRUFBa0JzQyxpQkFBaUIsU0FBUyxLQUMxQyxNQUFNMEosRUFBY3BCLEVBQVlrQixjQUNoQ3RMLEVBQWlCdUcsZUFBZWlGLEdBQ2hDakUsRUFBZSwyQkFBMkI1QyxrQkFDMUMzRSxFQUFpQm1GLE1BQU0sSUFHekJ4RixFQUFpQm1DLGlCQUFpQixTQUFTLEtBQ3pDeUYsRUFBZSwyQkFBMkJuRCxvQkFDMUNxRyxFQUFhdEYsTUFBTSxJQUdyQmhGLEVBQVkyQixpQkFBaUIsU0FBUyxLQUNwQ3lGLEVBQWUsb0NBQW9DbkQsb0JBQ25EMkcsRUFBeUI1RixNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWFsIHB1cnBvc2Ugb3B0aW9ucyBvbmplY3RzICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZXhwb3J0IGNvbnN0IGFwaU9wdGlvbnMgPSB7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgZGVmYXVsdEhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImVmMTY3NGIzLTJmODQtNDZiYS1hZGUxLWI1MjE2MTgzY2UyNFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AgbGV2ZWwgYnV0dG9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLW5ldy1jYXJkLWJ1dHRvblwiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmFsIGxpc3QgaXRlbXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZXhwb3J0IGNvbnN0IHBvcHVwTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcmRzX19saXN0XCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVNlbGVjdG9yKVxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdFBvcHVwRm9ybSA9IHByb2ZpbGVFZGl0UG9wdXAucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1lZGl0LXBvcHVwLWZvcm1cIlxuKTtcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1uZXctY2FyZC1wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkUG9wdXBGb3JtID1cbiAgYWRkTmV3Q2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG5cbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1wb3B1cFwiKTtcblxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2UgPSBwcmV2aWV3SW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcHJldmlld1RleHQgPSBwcmV2aWV3SW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fcHJldmlldy10ZXh0XCJcbik7XG5cbi8vIFRlbXBsYXRlc1xuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcblxuLy8gRE9NIE5vZGUgRWxlbWVudHNcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gXCIucHJvZmlsZV9fbmFtZVwiO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCI7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiO1xuZXhwb3J0IGNvbnN0IGF2YXRhckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlRWRpdE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVFZGl0RGVzY3JpcHRpb25JbnB1dCA9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXRcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlRWRpdENsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKFxuICBcIiNlZGl0LXBvcHVwLWNsb3NlLWJ1dHRvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgcG9wdXBBZGROZXdDYXJkTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZE5ld0NhcmRJbWFnZUxpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBcIik7XG5leHBvcnQgY29uc3QgcG9wdXBBZGROZXdDYXJkQ2xvc2VCdXR0b24gPSBhZGROZXdDYXJkUG9wdXAucXVlcnlTZWxlY3RvcihcbiAgXCIjYWRkLW5ldy1jYXJkLXBvcHVwLWNsb3NlLWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZXBvcHVwQ2xvc2VCdXR0b24gPSBwcmV2aWV3SW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcmV2aWV3LWltYWdlLXBvcHVwLWNsb3NlLWJ1dHRvblwiXG4pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBpc0xpa2VkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCxcbiAgICBoYW5kbGVDYXJkTGlrZVxuICApIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLmNhcmRJZCA9IF9pZDtcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtU3VibWl0ID0gaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xuICAgIHRoaXMuX2NvbmZpcm1EZWxldGVJbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI2NvbmZpcm0taW1hZ2UtZGVsZXRlLXBvcHVwXCJcbiAgICApO1xuICAgIHRoaXMuX2RhdGEgPSB7XG4gICAgICBsb2NhdGlvbjogdGhpcy5fbmFtZSxcbiAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgfTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBjYXJkX19saWtlLWJ1dHRvblxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSh0aGlzKTtcbiAgICB9KTtcbiAgICAvLyBjYXJkX19kZWxldGUtYnV0dG9uXG4gICAgdGhpcy5fY2FyZERlbGV0ZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQodGhpcyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIC8vIGxldCBjYXJkSWQgPSB0aGlzLl9jb25maXJtRGVsZXRlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICAgIC8vIGNvbnNvbGUubG9nKCcoYmVmb3JlIHJldHVybikgY2FyZElkIGlzJywgY2FyZElkKTtcbiAgICAvLyByZXR1cm4gY2FyZElkO1xuICB9XG5cbiAgdXBkYXRlTGlrZVN0YXR1cyhpc0xpa2VkKSB7XG4gICAgdGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xuICB9XG5cbiAgX3JlbmRlckxpa2VzKCkge1xuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9XG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2NhcmREZWxldGVJY29uID1cbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWljb25cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLmNhcmRMb2NhdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbG9jYXRpb25cIik7XG4gICAgLy8gZ2V0IGNhcmQgdmlld1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuY2FyZExvY2F0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAvL3NldCBldmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIC8vcmV0dXJuIHRoZSBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIHRoaXMuX2ZvdW5kSW52YWxpZCA9IGZhbHNlO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICB0aGlzLl9mb3VuZEludmFsaWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuX2ZvdW5kSW52YWxpZCkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGlucHV0RWxlbWVudCk7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICAvLyBvcGVucyBwb3B1cFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIC8vY2xvc2VzIHBvcHVwXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuXG4gICAgdGhpcy5faW5wdXRJdGVtcyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0SXRlbXMuZm9yRWFjaCgoaW5wdXRJdGVtKSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dEl0ZW0ubmFtZV0gPSBpbnB1dEl0ZW0udmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHRoaXMuX2lucHV0SXRlbXMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgYXBpT3B0aW9ucyxcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBmb3JtTGlzdCxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUF2YXRhcixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIGF2YXRhckltYWdlLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3BVcFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JtIGFkZCBhbmQgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbi8vIGVuYWJsZSB2YWxpZGF0aW9uXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHZhbGlkYXRpb25TZXR0aW5ncykgPT4ge1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuaWQ7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlIEFQSSBDbGllbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaU9wdGlvbnMpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmxldCBjYXJkU2VjdGlvbjtcblxuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigoY2FyZHMpID0+IHtcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogY2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkRWwgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxuICAgICk7XG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9KTtcblxuLy8gYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKHJlcykgPT4gY29uc29sZS5sb2coJ2luaXRpYWxDYXJkcyByZXR1cm5lZCcsIHJlcykpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9wdXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVkaXQgUG9wdXAgRm9ybSBQcm9maWxlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1wb3B1cFwiLFxuICBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXRcbik7XG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQb3B1cCBQcmV2aWV3IEltYWdlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGltYWdlUG9wVXAgPSBuZXcgUG9wVXBXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZS1wb3B1cFwiKTtcbmltYWdlUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBvcHVwIEFkZCBDYXJkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGFkZENhcmRQb3BVcCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhZGQtbmV3LWNhcmQtcG9wdXBcIixcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcbik7XG5hZGRDYXJkUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tUG9wdXAgQ29uZmlybSBEZWxldGUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgY29uZmlybURlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcbiAgXCIjY29uZmlybS1pbWFnZS1kZWxldGUtcG9wdXBcIixcbiAgaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdFxuKTtcbmNvbmZpcm1EZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1DaGFuZ2UgUHJvZmlsZSBBdmF0YXIgUG9wdXAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjY2hhbmdlLXByb2ZpbGUtYXZhdGFyLXBvcHVwXCIsXG4gIGhhbmRsZUNoYW5nZVByb2ZpbGVBdmF0YXJGb3JtU3VibWl0XG4pO1xuY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvTmV3ID0gbmV3IFVzZXJJbmZvKFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlQXZhdGFyXG4pO1xuXG5hcGkuZmV0Y2hVc2VySW5mbygpLnRoZW4oKGRhdGEpID0+IHtcbiAgbGV0IHVzZXJEYXRhID0gZGF0YTtcbiAgdXNlckluZm9OZXcuc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xuICB1c2VySW5mb05ldy5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGRhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCxcbiAgICBoYW5kbGVDYXJkTGlrZVxuICApO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xuICBpbWFnZVBvcFVwLm9wZW4oZGF0YSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XG4gIHVzZXJJbmZvTmV3LnNldFVzZXJJbmZvKGRhdGEpO1xuICBhcGkuZWRpdFVzZXJJbmZvKGRhdGEpO1xuICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNoYW5nZVByb2ZpbGVBdmF0YXJGb3JtU3VibWl0KGRhdGEpIHtcbiAgY29uc29sZS5sb2coZGF0YS5saW5rKTtcbiAgdXNlckluZm9OZXcuc2V0VXNlckF2YXRhcihkYXRhLmxpbmspO1xuICBhcGkuZWRpdFVzZXJBdmF0YXIoZGF0YS5saW5rKTtcbiAgY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGRhdGEpIHtcbiAgY29uc3QgY2FyZFZhbHVlID0gcmVuZGVyQ2FyZChkYXRhKTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkVmFsdWUpO1xuICBhcGkuYWRkQ2FyZChkYXRhKTtcbiAgYWRkQ2FyZFBvcFVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQoY2FyZCkge1xuICBjb25zb2xlLmxvZyhjYXJkKTtcbiAgY29uZmlybURlbGV0ZVBvcHVwLm9wZW4oKTtcbiAgY29uZmlybURlbGV0ZVBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZCk7XG4gICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgY29uZmlybURlbGV0ZVBvcHVwLmNsb3NlKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkTGlrZShjYXJkKSB7XG4gIGNvbnNvbGUubG9nKFwiY2FyZCBpc1wiLCBjYXJkKTtcbiAgaWYgKCFjYXJkLmlzTGlrZWQpIHtcbiAgICBhcGkubGlrZUNhcmQoY2FyZC5jYXJkSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC51cGRhdGVMaWtlU3RhdHVzKHRydWUpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFwaS5kaXNsaWtlQ2FyZChjYXJkLmNhcmRJZCkudGhlbigoKSA9PiB7XG4gICAgICBjYXJkLnVwZGF0ZUxpa2VTdGF0dXMoZmFsc2UpO1xuICAgIH0pO1xuICB9XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgcHJvZmlsZURhdGEgPSB1c2VySW5mb05ldy5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRWRpdFBvcHVwLnNldElucHV0VmFsdWVzKHByb2ZpbGVEYXRhKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWVkaXQtcG9wdXAtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcImNyZWF0ZS1wbGFjZS1wb3B1cC1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGFkZENhcmRQb3BVcC5vcGVuKCk7XG59KTtcblxuYXZhdGFySW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJjaGFuZ2UtcHJvZmlsZS1hdmF0YXItcG9wdXAtZm9ybVwiXS50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBjaGFuZ2VQcm9maWxlQXZhdGFyUG9wVXAub3BlbigpO1xufSk7XG5cbi8vIGFwaS5saWtlQ2FyZChgNjU1Mjc2NWU1OTc1NzMwMDE5OTMxNjQ4YCk7XG4iLCJpbXBvcnQgeyBhcGlPcHRpb25zIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBjb25zdHJ1Y3RvciBib2R5XG4gICAgdGhpcy5fYmFzZVVybCA9IGFwaU9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gYXBpT3B0aW9ucy5kZWZhdWx0SGVhZGVycztcbiAgICB0aGlzLl91c2VyUm91dGUgPSBgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWA7XG4gICAgdGhpcy5fY2FyZFJvdXRlID0gYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgYXN5bmMgX3JlcXVlc3QodXJsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGF3YWl0IGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIC8vIFVzZXIgcm91dGUgbWV0aG9kc1xuXG4gIGZldGNoVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fdXNlclJvdXRlLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCh0aGlzLl91c2VyUm91dGUsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG4gIGVkaXRVc2VyQXZhdGFyKGxpbmspIHtcbiAgICBjb25zb2xlLmxvZygnKGluc2lkZSBzZXRVc2VyQXZhdGFyKCknLCBsaW5rKTtcblxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX3VzZXJSb3V0ZX0vYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBDYXJkIHJvdXRlIG1ldGhvZHNcbiAgYXN5bmMgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZldGNoQ3VycmVudENhcmRzKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZENhcmQoY2FyZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX1gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkLmxpbmssXG4gICAgICB9KSxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmQpIHtcbiAgICBjb25zb2xlLmxvZyhjYXJkKVxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX0vJHtjYXJkLmNhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGxpa2VDYXJkKGlkKSB7XG4gICAgY29uc29sZS5sb2coJ2xpa2VDYXJkIGZpcmVkIScpO1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX0vJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpc0xpa2VkOiB0cnVlLFxuICAgICAgfSksXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoaWQpIHtcbiAgICBjb25zb2xlLmxvZygnZGlzbGlrZUNhcmQgZmlyZWQhJyk7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fY2FyZFJvdXRlfS8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZVwiKTtcbiAgICB0aGlzLl9wcmV2aWV3VGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX3ByZXZpZXctdGV4dFwiXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IGRhdGEubG9jYXRpb247XG4gICAgdGhpcy5fcHJldmlld1RleHQudGV4dENvbnRlbnQgPSBkYXRhLmxvY2F0aW9uO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI2NvbmZpcm0taW1hZ2UtZGVsZXRlLXBvcHVwLWZvcm1cIlxuICAgICk7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCA9IGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQ7XG4gIH1cblxuICAvLyB0aGlzIGZ1bmN0aW9uIGFjY2VwdHMgYW4gZnVuY3Rpb24gYXMgYW4gYXJndW1lbnQsIGFuZCBhc3NpZ25zIGl0IHRvIHRoaXNcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gc2V0IGV2ZW50IGxpc3RlbmVyIHdpdGggdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2sgYXMgaXQncyBoYW5kbGVyXG4gICAgLy8gZG9uJ3QgZm9yZ2V0IHRvIGNhbGwgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnNcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrKCk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlSm9iU2VsZWN0b3IsIHByb2ZpbGVBdmF0YXIpIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxuICAgIH07XG4gICAgLy8gY29uc29sZS5sb2codXNlckRhdGEpO1xuICAgIHJldHVybiB1c2VyRGF0YTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgY29uc29sZS5sb2coYXZhdGFyKTtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iXSwibmFtZXMiOlsiYXBpT3B0aW9ucyIsImJhc2VVcmwiLCJkZWZhdWx0SGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImZvcm1MaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwiZnJvbSIsInByb2ZpbGVFZGl0UG9wdXAiLCJhZGROZXdDYXJkUG9wdXAiLCJwcmV2aWV3SW1hZ2VQb3B1cCIsImF2YXRhckltYWdlIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDb25maXJtU3VibWl0IiwiaGFuZGxlQ2FyZExpa2UiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsImNhcmRJZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDb25maXJtU3VibWl0IiwiX2hhbmRsZUNhcmRMaWtlIiwiX2NvbmZpcm1EZWxldGVJbWFnZVBvcHVwIiwiX2RhdGEiLCJsb2NhdGlvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkTGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZERlbGV0ZUljb24iLCJfY2FyZEltYWdlIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsInVwZGF0ZUxpa2VTdGF0dXMiLCJfcmVuZGVyTGlrZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJnZXRJZCIsImlkIiwiX2dldFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsImNhcmRMb2NhdGlvbiIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxlbWVudHMiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yTWVzc2FnZUVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfZm91bmRJbnZhbGlkIiwiZm9yRWFjaCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJlbmFibGVTdWJtaXRCdXR0b24iLCJlIiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJjb25zb2xlIiwibG9nIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiX2Nsb3NlQnV0dG9uIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dEl0ZW1zIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dEl0ZW0iLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsImlucHV0IiwicmVzZXQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJhcGkiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX3VzZXJSb3V0ZSIsIl9jYXJkUm91dGUiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJmZXRjaFVzZXJJbmZvIiwiaGVhZGVycyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJlZGl0VXNlckluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZWRpdFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaEN1cnJlbnRDYXJkcyIsImFkZENhcmQiLCJjYXJkIiwiZGVsZXRlQ2FyZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJjYXJkU2VjdGlvbiIsImNhcmRzIiwiY2FyZERhdGEiLCJjYXJkRWwiLCJyZW5kZXJDYXJkIiwidXNlckluZm9OZXciLCJzZXRVc2VySW5mbyIsImltYWdlUG9wVXAiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdUZXh0IiwiYWRkQ2FyZFBvcFVwIiwiY2FyZFZhbHVlIiwiY29uZmlybURlbGV0ZVBvcHVwIiwic2V0U3VibWl0QWN0aW9uIiwiYWN0aW9uIiwiX2hhbmRsZVN1Ym1pdENhbGxiYWNrIiwiY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwIiwic2V0VXNlckF2YXRhciIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlSm9iU2VsZWN0b3IiLCJwcm9maWxlQXZhdGFyIiwiX2Fib3V0IiwiX2F2YXRhciIsImdldFVzZXJJbmZvIiwidXNlckRhdGEiLCJwcm9maWxlRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=