!function(){"use strict";document.querySelectorAll(".popup");const e=document.querySelector("#profile-edit-popup"),t=(e.querySelector("#profile-edit-popup-form"),document.querySelector("#add-new-card-popup")),o=(t.querySelector(".popup__form"),document.querySelector("#preview-image-popup")),s=(document.querySelector(".cards__list"),o.querySelector("#preview-image"),o.querySelector(".popup__preview-text"),document.querySelector("#card-template").content.firstElementChild,document.querySelector("#profile-edit-button")),n=(document.querySelector(".profile__name"),document.querySelector(".profile__description"),document.querySelector("#name"),document.querySelector("#description"),e.querySelector("#edit-popup-close-button"),document.querySelector("#add-new-card-button"));document.querySelector("#title"),document.querySelector("#popup"),t.querySelector("#add-new-card-popup-close-button"),o.querySelector("#preview-image-popup-close-button");class r{constructor(e,t,o){let{location:s,link:n}=e;this._location=s,this._link=n,this._cardSelector=t,this._handleImageClick=o,this._data={location:this._location,link:this._link}}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardDeleteIcon.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteIcon=this._cardElement.querySelector(".card__delete-icon"),this._cardImage=this._cardElement.querySelector(".card__image"),this.cardLocation=this._cardElement.querySelector(".card__location"),this._cardImage.src=this._link,this._cardImage.alt=this._location,this.cardLocation.textContent=this._location,this._setEventListeners(),this._cardElement}}class i{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._foundInvalid=!1,this._inputElements.forEach((e=>{e.validity.valid||(this._foundInvalid=!0)})),this._foundInvalid?this.disableSubmitButton():this.enableSubmitButton()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{console.log(e),this._hideInputError(e)}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class c{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("popup")&&this.close()})),this._closeButton=this._popupElement.querySelector(".popup__close"),this._closeButton.addEventListener("click",(()=>{this.close()}))}}class a extends c{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t,console.log(this._handleFormSubmit),this._inputItems=this._popupForm.querySelectorAll(".popup__input")}_getInputValues(){const e={};return this._inputItems.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){console.log(e),this._inputItems.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}const l={};var u;u={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(u.formSelector)).forEach((e=>{const t=new i(u,e),o=e.id;l[o]=t,t.enableValidation()}));const p=new a("#profile-edit-popup",(function(e){h.setUserInfo(e),p.close()}));p.setEventListeners();const d=new class extends c{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#preview-image"),this._previewText=this._popupElement.querySelector(".popup__preview-text")}open(e){console.log(e),this._previewImage.src=e.link,this._previewImage.alt=e.location,this._previewText.textContent=e.location,super.open()}}("#preview-image-popup");d.setEventListeners();const _=new a("#add-new-card-popup",(function(e){const t=E(e);m.addItem(t),_.close()}));_.setEventListeners();const m=new class{constructor(e,t){let{items:o,renderer:s}=e;this._items=o,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{location:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{location:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{location:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{location:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{location:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{location:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{console.log(e);const t=E(e);m.addItem(t)}},".cards__list");m.renderItems();const h=new class{constructor(e,t){this._name=document.querySelector(e),this._occupation=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,occupation:this._occupation.textContent}}setUserInfo(e){let{name:t,occupation:o}=e;this._name.textContent=t,this._occupation.textContent=o}}(".profile__name",".profile__description");function E(e){return new r(e,"#card-template",S).getView()}function S(e){console.log(e),d.open(e)}s.addEventListener("click",(()=>{const e=h.getUserInfo();p.setInputValues(e),l["profile-edit-popup-form"].resetValidation(),p.open()})),n.addEventListener("click",(()=>{l["create-place-popup-form"].toggleButtonState(),_.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxRQUFRVyxFQUFPLEdBRy9CLGdCQUVGWixFQUFZUSxjQUVaLE1BQU1oQixFQUFjLElHM0VMLE1BQ2J2RyxXQUFBQSxDQUFZNEgsRUFBcUJDLEdBQy9CdkgsS0FBS3dILE1BQVF6SSxTQUFTRyxjQUFjb0ksR0FDcEN0SCxLQUFLeUgsWUFBYzFJLFNBQVNHLGNBQWNxSSxFQUM1QyxDQUVBRyxXQUFBQSxHQUtFLE1BSmlCLENBQ2Z0QyxLQUFNcEYsS0FBS3dILE1BQU1qRyxZQUNqQm9HLFdBQVkzSCxLQUFLeUgsWUFBWWxHLFlBR2pDLENBRUEyRSxXQUFBQSxDQUFXdkcsR0FBdUIsSUFBdEIsS0FBRXlGLEVBQUksV0FBRXVDLEdBQVloSSxFQUM5QkssS0FBS3dILE1BQU1qRyxZQUFjNkQsRUFDekJwRixLQUFLeUgsWUFBWWxHLFlBQWNvRyxDQUNqQyxHSDBEK0IsaUJBQWtCLHlCQU1uRCxTQUFTbkIsRUFBV2pCLEdBRWxCLE9BRGEsSUFBSTlGLEVBQUs4RixFQUFNLGlCQUFrQjFGLEdBQ2xDc0IsU0FDZCxDQUVBLFNBQVN0QixFQUFpQjBGLEdBQ3hCN0IsUUFBUUMsSUFBSTRCLEdBQ1pZLEVBQVdsQyxLQUFLc0IsRUFDbEIsQ0FpQkFsRyxFQUFrQm1CLGlCQUFpQixTQUFTLEtBQzFDLE1BQU1vSCxFQUFjM0IsRUFBWXlCLGNBQ2hDekksRUFBaUJxRyxlQUFlc0MsR0FDaENsQyxFQUFlLDJCQUEyQmpDLGtCQUMxQ3hFLEVBQWlCZ0YsTUFBTSxJQUd6QnpFLEVBQWlCZ0IsaUJBQWlCLFNBQVMsS0FDekNrRixFQUFlLDJCQUEyQnhDLG9CQUMxQ29ELEVBQWFyQyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbG9jYXRpb246IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBsb2NhdGlvbjogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbG9jYXRpb246IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIGxvY2F0aW9uOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbG9jYXRpb246IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIGxvY2F0aW9uOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtcG9wdXBcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdFBvcHVwRm9ybSA9IHByb2ZpbGVFZGl0UG9wdXAucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWVkaXQtcG9wdXAtZm9ybVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1uZXctY2FyZC1wb3B1cFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRQb3B1cEZvcm0gPVxyXG4gIGFkZE5ld0NhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLXBvcHVwXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlUG9wdXAucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld1RleHQgPSBwcmV2aWV3SW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19wcmV2aWV3LXRleHRcIlxyXG4pO1xyXG5cclxuLy8gVGVtcGxhdGVzXHJcbmV4cG9ydCBjb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPVxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG5cclxuLy8gRE9NIE5vZGUgRWxlbWVudHNcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZUVkaXROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVFZGl0RGVzY3JpcHRpb25JbnB1dCA9XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZUVkaXRDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0UG9wdXAucXVlcnlTZWxlY3RvcihcclxuICBcIiNlZGl0LXBvcHVwLWNsb3NlLWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbmV3LWNhcmQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGROZXdDYXJkTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkTmV3Q2FyZEltYWdlTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cFwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkTmV3Q2FyZENsb3NlQnV0dG9uID0gYWRkTmV3Q2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjYWRkLW5ldy1jYXJkLXBvcHVwLWNsb3NlLWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2Vwb3B1cENsb3NlQnV0dG9uID0gcHJldmlld0ltYWdlUG9wdXAucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcmV2aWV3LWltYWdlLXBvcHVwLWNsb3NlLWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbG9jYXRpb24sIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9sb2NhdGlvbiA9IGxvY2F0aW9uO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2RhdGEgPSB7XHJcbiAgICAgIGxvY2F0aW9uOiB0aGlzLl9sb2NhdGlvbixcclxuICAgICAgbGluazogdGhpcy5fbGluayxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBjYXJkX19saWtlLWJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgIH0pO1xyXG4gICAgLy8gY2FyZF9fZGVsZXRlLWJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPVxyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUljb24gPVxyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1pY29uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuY2FyZExvY2F0aW9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19sb2NhdGlvblwiKTtcclxuICAgIC8vIGdldCBjYXJkIHZpZXdcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX2xvY2F0aW9uO1xyXG4gICAgdGhpcy5jYXJkTG9jYXRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9sb2NhdGlvbjtcclxuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIC8vcmV0dXJuIHRoZSBjYXJkXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgdGhpcy5fZm91bmRJbnZhbGlkID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIHRoaXMuX2ZvdW5kSW52YWxpZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLl9mb3VuZEludmFsaWQpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVuYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBlbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coaW5wdXRFbGVtZW50KTtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgLy8gb3BlbnMgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvL2Nsb3NlcyBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykpIHtcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpXHJcbiAgXHJcbiAgICB0aGlzLl9pbnB1dEl0ZW1zID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0SXRlbXMuZm9yRWFjaCgoaW5wdXRJdGVtKSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0SXRlbS5uYW1lXSA9IGlucHV0SXRlbS52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICB0aGlzLl9pbnB1dEl0ZW1zLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIGFkZE5ld0NhcmRCdXR0b24sXHJcbiAgaW5pdGlhbENhcmRzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3BVcFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvcm0gYWRkIGFuZCBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fVxyXG5cclxuLy8gZW5hYmxlIHZhbGlkYXRpb25cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uU2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVNlbGVjdG9yKSlcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudClcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuaWRcclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFZGl0IFBvcHVwIEZvcm0gUHJvZmlsZS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtcG9wdXBcIixcclxuICBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxucHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBvcHVwIFByZXZpZXcgSW1hZ2UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IGltYWdlUG9wVXAgPSBuZXcgUG9wVXBXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZS1wb3B1cFwiKTtcclxuaW1hZ2VQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBvcHVwIEFkZCBDYXJkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBhZGRDYXJkUG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNhZGQtbmV3LWNhcmQtcG9wdXBcIixcclxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxyXG4pO1xyXG5hZGRDYXJkUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgY29uc29sZS5sb2coaXRlbSk7XHJcbiAgICAgIGNvbnN0IGNhcmRFbCA9IHJlbmRlckNhcmQoaXRlbSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCB1c2VySW5mb05ldyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX19uYW1lXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhkYXRhKSB7XHJcbiAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgaW1hZ2VQb3BVcC5vcGVuKGRhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIHVzZXJJbmZvTmV3LnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRWYWx1ZSA9IHJlbmRlckNhcmQoZGF0YSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkVmFsdWUpO1xyXG4gIGFkZENhcmRQb3BVcC5jbG9zZSgpO1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBwcm9maWxlRGF0YSA9IHVzZXJJbmZvTmV3LmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyhwcm9maWxlRGF0YSk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWVkaXQtcG9wdXAtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJjcmVhdGUtcGxhY2UtcG9wdXAtZm9ybVwiXS50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIGFkZENhcmRQb3BVcC5vcGVuKCk7XHJcbn0pO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wcmV2aWV3VGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fcHJldmlldy10ZXh0XCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IGRhdGEubG9jYXRpb247XHJcbiAgICB0aGlzLl9wcmV2aWV3VGV4dC50ZXh0Q29udGVudCA9IGRhdGEubG9jYXRpb247XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IocHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZUpvYlNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX29jY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVKb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBvY2N1cGF0aW9uOiB0aGlzLl9vY2N1cGF0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VyRGF0YTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgb2NjdXBhdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX29jY3VwYXRpb24udGV4dENvbnRlbnQgPSBvY2N1cGF0aW9uO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvZmlsZUVkaXRQb3B1cCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGROZXdDYXJkUG9wdXAiLCJwcmV2aWV3SW1hZ2VQb3B1cCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibG9jYXRpb24iLCJsaW5rIiwidGhpcyIsIl9sb2NhdGlvbiIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2RhdGEiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZExpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2NhcmREZWxldGVJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiX2dldFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsImNhcmRMb2NhdGlvbiIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbGVtZW50cyIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJfZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2ZvdW5kSW52YWxpZCIsImZvckVhY2giLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiZW5hYmxlU3VibWl0QnV0dG9uIiwiZSIsImRpc2FibGVkIiwicmVzZXRWYWxpZGF0aW9uIiwiY29uc29sZSIsImxvZyIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9jbG9zZUJ1dHRvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRJdGVtcyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXRJdGVtIiwibmFtZSIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwiaW5wdXQiLCJyZXNldCIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJ1c2VySW5mb05ldyIsInNldFVzZXJJbmZvIiwiaW1hZ2VQb3BVcCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld1RleHQiLCJhZGRDYXJkUG9wVXAiLCJjYXJkVmFsdWUiLCJyZW5kZXJDYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEVsIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVKb2JTZWxlY3RvciIsIl9uYW1lIiwiX29jY3VwYXRpb24iLCJnZXRVc2VySW5mbyIsIm9jY3VwYXRpb24iLCJwcm9maWxlRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=