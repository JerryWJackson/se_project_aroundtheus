!function(){"use strict";const e={baseUrl:"https://around-api.en.tripleten-services.com/v1",defaultHeaders:{authorization:"ef1674b3-2f84-46ba-ade1-b5216183ce24","Content-Type":"application/json"}},t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},s=document.querySelector("#profile-edit-button"),r=document.querySelector("#add-new-card-button"),i=document.querySelector("#avatar-edit-button"),o=(document.querySelectorAll(".popup"),document.querySelectorAll(".cards__list"),Array.from(document.querySelectorAll(t.formSelector))),n=document.querySelector("#profile-edit-popup"),a=(n.querySelector("#profile-edit-popup-form"),document.querySelector("#add-new-card-popup")),c=(a.querySelector(".popup__form"),document.querySelector("#preview-image-popup"));document.querySelector(".cards__list"),c.querySelector("#preview-image"),c.querySelector(".popup__preview-text"),document.querySelector("#card-template").content.firstElementChild,document.querySelector(".profile__avatar-image"),document.querySelector("#name"),document.querySelector("#about"),n.querySelector("#edit-popup-close-button"),document.querySelector("#title"),document.querySelector("#popup"),a.querySelector("#add-new-card-popup-close-button"),c.querySelector("#preview-image-popup-close-button");class u{constructor(e,t,s,r,i){let{name:o,link:n,_id:a,isLiked:c}=e;this._name=o,this._link=n,this.cardId=a,this.isLiked=c,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteConfirmSubmit=r,this._handleCardLike=i,this._confirmDeleteImagePopup=document.querySelector("#confirm-image-delete-popup"),this._data={location:this._name,link:this._link}}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleCardLike(this)})),this._cardDeleteIcon.addEventListener("click",(()=>{this._handleDeleteConfirmSubmit(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}updateLikeStatus(e){console.log(e),this.isLiked=e,this._renderLikes()}_renderLikes(){this.isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteIcon=this._cardElement.querySelector(".card__delete-icon"),this._cardImage=this._cardElement.querySelector(".card__image"),this.cardLocation=this._cardElement.querySelector(".card__location"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this.cardLocation.textContent=this._name,this._setEventListeners(),this._cardElement}}class l{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageElement.textContent=e.validationMessage,this._errorMessageElement.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageElement.textContent="",this._errorMessageElement.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._foundInvalid=!1,this._inputElements.forEach((e=>{e.validity.valid||(this._foundInvalid=!0)})),this._foundInvalid?this.disableSubmitButton():this.enableSubmitButton()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class d{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("popup")&&this.close()})),this._closeButton=this._popupElement.querySelector(".popup__close"),this._closeButton.addEventListener("click",(()=>{this.close()}))}}class h extends d{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t,this._inputItems=this._popupForm.querySelectorAll(".popup__input"),this._submitButton=this._popupForm.querySelector(".popup__button"),this._submitButtonValue=this._submitButton.textContent}_getInputValues(){const e={};return this._inputItems.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputItems.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}setLoading(e){this._submitButton.textContent=e}}class p{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const _={};(e=>{o.forEach((t=>{const s=new l(e,t),r=t.id;_[r]=s,s.enableValidation()}))})(t);const m=new class{constructor(){this._baseUrl=e.baseUrl,this._headers=e.defaultHeaders,this._userRoute=`${this._baseUrl}/users/me`,this._cardRoute=`${this._baseUrl}/cards`}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}async _request(e,t){return await fetch(e,t).then(this._checkResponse)}fetchUserInfo(){return this._request(this._userRoute,{headers:this._headers}).catch((e=>{console.error(e)}))}editUserInfo(e){let{name:t,about:s}=e;return this._request(this._userRoute,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).catch((e=>{console.error(e)}))}editUserAvatar(e){return this._request(`${this._userRoute}/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).catch((e=>{console.error(e)}))}async getInitialCards(){return await this._request(`${this._cardRoute}`,{headers:this._headers}).catch((e=>{console.error(e)}))}fetchCurrentCards(){return this._request(`${this._cardRoute}`,{headers:this._headers}).catch((e=>{console.error(e)}))}addCard(e){return this._request(`${this._cardRoute}`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).catch((e=>{console.error(e)}))}deleteCard(e){return this._request(`${this._cardRoute}/${e.cardId}`,{method:"DELETE",headers:this._headers}).catch((e=>{console.error(e)}))}likeCard(e){return this._request(`${this._cardRoute}/${e}/likes`,{method:"PUT",headers:this._headers,body:JSON.stringify({isLiked:!0})}).catch((e=>{console.error(e)}))}dislikeCard(e){return this._request(`${this._cardRoute}/${e}/likes`,{method:"DELETE",headers:this._headers}).catch((e=>{console.error(e)}))}}(e);let S;m.getInitialCards().then((e=>{S=new p({items:e,renderer:e=>{const t=L(e);S.addItem(t)}},".cards__list"),S.renderItems()})).catch((e=>{console.error(e)}));const v=new h("#profile-edit-popup",(function(e){v.setLoading("Saving..."),g.setUserInfo(e),m.editUserInfo(e).then((()=>{v.close()})).finally((()=>v.setLoading("Save")))}));v.setEventListeners();const E=new class extends d{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#preview-image"),this._previewText=this._popupElement.querySelector(".popup__preview-text")}open(e){console.log(e),this._previewImage.src=e.link,this._previewImage.alt=e.location,this._previewText.textContent=e.location,super.open()}}("#preview-image-popup");E.setEventListeners();const f=new h("#add-new-card-popup",(function(e){f.setLoading("Saving...");const t=L(e);S.addItem(t),m.addCard(e).then((()=>{f.close()})).finally((()=>f.setLoading("Create")))}));f.setEventListeners();const b=new class extends d{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector("#confirm-image-delete-popup-form"),this._handleDeleteConfirmSubmit=t}setSubmitAction(e){this._handleSubmitCallback=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitCallback()})),super.setEventListeners()}}("#confirm-image-delete-popup",q);b.setEventListeners();const y=new h("#change-profile-avatar-popup",(function(e){y.setLoading("Saving..."),g.setUserAvatar(e.link),m.editUserAvatar(e.link).then((()=>{y.close()})).finally((()=>y.setLoading("Save")))}));y.setEventListeners();const g=new class{constructor(e,t,s){this._name=document.querySelector(e),this._about=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}setUserInfo(e,t){console.log(this.__name),this._name.textContent=e,this._about.textContent=t}setUserAvatar(e){this._avatar.src=e}}(".profile__name",".profile__description",".profile__avatar-image");function L(e){return new u(e,"#card-template",k,q,C).getView()}function k(e){E.open(e)}function q(e){b.open(),b.setSubmitAction((()=>{m.deleteCard(e),e.handleDeleteCard(),b.close()}))}function C(e){e.isLiked?m.dislikeCard(e.cardId).then((()=>{e.updateLikeStatus(!1)})):m.likeCard(e.cardId).then((()=>{e.updateLikeStatus(!0)}))}m.fetchUserInfo().then((e=>{let t=e;g.setUserInfo(t.name,t.about),g.setUserAvatar(t.avatar)})),s.addEventListener("click",(()=>{const e=g.getUserInfo();v.setInputValues(e),_["profile-edit-popup-form"].resetValidation(),v.open()})),r.addEventListener("click",(()=>{_["create-place-popup-form"].toggleButtonState(),f.open()})),i.addEventListener("click",(()=>{_["change-profile-avatar-popup-form"].toggleButtonState(),y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDZkEsRUFBSzVILG1CQUNMNkksRUFBbUIxRixPQUFPLEdBRTlCLENBRUEsU0FBU3hFLEVBQWVpSixHQUNqQkEsRUFBSzdJLFFBS1I0RyxFQUFJb0MsWUFBWUgsRUFBS3pJLFFBQVF3SCxNQUFLLEtBQ2hDaUIsRUFBS3pILGtCQUFpQixFQUFNLElBTDlCd0YsRUFBSW1DLFNBQVNGLEVBQUt6SSxRQUFRd0gsTUFBSyxLQUM3QmlCLEVBQUt6SCxrQkFBaUIsRUFBSyxHQU9qQyxDQXhFQXdGLEVBQUlpQixnQkFBZ0JELE1BQU1wQyxJQUN4QixJQUFJbUYsRUFBV25GLEVBQ2Y4RCxFQUFZQyxZQUFZb0IsRUFBUzlLLEtBQU04SyxFQUFTeEMsT0FDaERtQixFQUFZYSxjQUFjUSxFQUFTbEMsT0FBTyxJQTJFNUNqSyxFQUFrQnNDLGlCQUFpQixTQUFTLEtBQzFDLE1BQU04SixFQUFjdEIsRUFBWW1CLGNBQ2hDeEwsRUFBaUJzRyxlQUFlcUYsR0FDaENuRSxFQUFlLDJCQUEyQjdDLGtCQUMxQzNFLEVBQWlCaUYsTUFBTSxJQUd6QnZGLEVBQWlCbUMsaUJBQWlCLFNBQVMsS0FDekMyRixFQUFlLDJCQUEyQnBELG9CQUMxQ3VHLEVBQWExRixNQUFNLElBR3JCdEYsRUFBaUJrQyxpQkFBaUIsU0FBUyxLQUN6QzJGLEVBQWUsb0NBQW9DcEQsb0JBQ25ENkcsRUFBeUJoRyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWFsIHB1cnBvc2Ugb3B0aW9ucyBvbmplY3RzICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZXhwb3J0IGNvbnN0IGFwaU9wdGlvbnMgPSB7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgZGVmYXVsdEhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImVmMTY3NGIzLTJmODQtNDZiYS1hZGUxLWI1MjE2MTgzY2UyNFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AgbGV2ZWwgYnV0dG9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLW5ldy1jYXJkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZWRpdC1idXR0b25cIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhbCBsaXN0IGl0ZW1zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmV4cG9ydCBjb25zdCBwb3B1cExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJkc19fbGlzdFwiKTtcbmV4cG9ydCBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvblNldHRpbmdzLmZvcm1TZWxlY3Rvcilcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtcG9wdXBcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRQb3B1cEZvcm0gPSBwcm9maWxlRWRpdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZWRpdC1wb3B1cC1mb3JtXCJcbik7XG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbmV3LWNhcmQtcG9wdXBcIik7XG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZFBvcHVwRm9ybSA9XG4gIGFkZE5ld0NhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtcG9wdXBcIik7XG5cbmV4cG9ydCBjb25zdCBjYXJkTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlUG9wdXAucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdUZXh0ID0gcHJldmlld0ltYWdlUG9wdXAucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX3ByZXZpZXctdGV4dFwiXG4pO1xuXG4vLyBUZW1wbGF0ZXNcbmV4cG9ydCBjb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbi8vIERPTSBOb2RlIEVsZW1lbnRzXG5cbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IFwiLnByb2ZpbGVfX25hbWVcIjtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBcIi5wcm9maWxlX19hdmF0YXItaW1hZ2VcIjtcbmV4cG9ydCBjb25zdCBhdmF0YXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZUVkaXROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlRWRpdERlc2NyaXB0aW9uSW5wdXQgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Fib3V0XCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZUVkaXRDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0UG9wdXAucXVlcnlTZWxlY3RvcihcbiAgXCIjZWRpdC1wb3B1cC1jbG9zZS1idXR0b25cIlxuKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkTmV3Q2FyZE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGVcIik7XG5leHBvcnQgY29uc3QgcG9wdXBBZGROZXdDYXJkSW1hZ2VMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkTmV3Q2FyZENsb3NlQnV0dG9uID0gYWRkTmV3Q2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2FkZC1uZXctY2FyZC1wb3B1cC1jbG9zZS1idXR0b25cIlxuKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2Vwb3B1cENsb3NlQnV0dG9uID0gcHJldmlld0ltYWdlUG9wdXAucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJldmlldy1pbWFnZS1wb3B1cC1jbG9zZS1idXR0b25cIlxuKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQsXG4gICAgaGFuZGxlQ2FyZExpa2VcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5jYXJkSWQgPSBfaWQ7XG4gICAgdGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdCA9IGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcbiAgICB0aGlzLl9jb25maXJtRGVsZXRlSW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNjb25maXJtLWltYWdlLWRlbGV0ZS1wb3B1cFwiXG4gICAgKTtcbiAgICB0aGlzLl9kYXRhID0ge1xuICAgICAgbG9jYXRpb246IHRoaXMuX25hbWUsXG4gICAgICBsaW5rOiB0aGlzLl9saW5rLFxuICAgIH07XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gY2FyZF9fbGlrZS1idXR0b25cbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UodGhpcyk7XG4gICAgfSk7XG4gICAgLy8gY2FyZF9fZGVsZXRlLWJ1dHRvblxuICAgIHRoaXMuX2NhcmREZWxldGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtU3VibWl0KHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2RhdGEpO1xuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICAvLyBsZXQgY2FyZElkID0gdGhpcy5fY29uZmlybURlbGV0ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgICAvLyBjb25zb2xlLmxvZygnKGJlZm9yZSByZXR1cm4pIGNhcmRJZCBpcycsIGNhcmRJZCk7XG4gICAgLy8gcmV0dXJuIGNhcmRJZDtcbiAgfVxuXG4gIHVwZGF0ZUxpa2VTdGF0dXMoaXNMaWtlZCkge1xuICAgIGNvbnNvbGUubG9nKGlzTGlrZWQpO1xuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcbiAgfVxuXG4gIF9yZW5kZXJMaWtlcygpIHtcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID1cbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUljb24gPVxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtaWNvblwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuY2FyZExvY2F0aW9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19sb2NhdGlvblwiKTtcbiAgICAvLyBnZXQgY2FyZCB2aWV3XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5jYXJkTG9jYXRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgLy9yZXR1cm4gdGhlIGNhcmRcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgdGhpcy5fZm91bmRJbnZhbGlkID0gZmFsc2U7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgIHRoaXMuX2ZvdW5kSW52YWxpZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5fZm91bmRJbnZhbGlkKSB7XG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZW5hYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgLy8gb3BlbnMgcG9wdXBcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICAvL2Nsb3NlcyBwb3B1cFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcblxuICAgIHRoaXMuX2lucHV0SXRlbXMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVmFsdWUgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dEl0ZW1zLmZvckVhY2goKGlucHV0SXRlbSkgPT4ge1xuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXRJdGVtLm5hbWVdID0gaW5wdXRJdGVtLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dEl0ZW1zLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBzZXRMb2FkaW5nKGJ1dHRvblZhbHVlKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBidXR0b25WYWx1ZTtcbiAgfVxuXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBhcGlPcHRpb25zLFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGZvcm1MaXN0LFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlQXZhdGFyLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcbiAgYXZhdGFyRWRpdEJ1dHRvbixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wVXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FQSS5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSBhZGQgYW5kIFZhbGlkYXRpb24gICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG4vLyBlbmFibGUgdmFsaWRhdGlvblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uU2V0dGluZ3MpID0+IHtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmlkO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25TZXR0aW5ncyk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZSBBUEkgQ2xpZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlPcHRpb25zKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5sZXQgY2FyZFNlY3Rpb247XG5cbmFwaVxuICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxuICAgICAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FyZEVsID0gcmVuZGVyQ2FyZChjYXJkRGF0YSk7XG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWwpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFwiLmNhcmRzX19saXN0XCJcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfSk7XG5cbi8vIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXMpID0+IGNvbnNvbGUubG9nKCdpbml0aWFsQ2FyZHMgcmV0dXJuZWQnLCByZXMpKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFZGl0IFBvcHVwIEZvcm0gUHJvZmlsZS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtcG9wdXBcIixcbiAgaGFuZGxlRWRpdFByb2ZpbGVGb3JtU3VibWl0XG4pO1xucHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUG9wdXAgUHJldmlldyBJbWFnZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBpbWFnZVBvcFVwID0gbmV3IFBvcFVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtcG9wdXBcIik7XG5pbWFnZVBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQb3B1cCBBZGQgQ2FyZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBhZGRDYXJkUG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjYWRkLW5ldy1jYXJkLXBvcHVwXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xuYWRkQ2FyZFBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVBvcHVwIENvbmZpcm0gRGVsZXRlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGNvbmZpcm1EZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXG4gIFwiI2NvbmZpcm0taW1hZ2UtZGVsZXRlLXBvcHVwXCIsXG4gIGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXRcbik7XG5jb25maXJtRGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQ2hhbmdlIFByb2ZpbGUgQXZhdGFyIFBvcHVwLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2NoYW5nZS1wcm9maWxlLWF2YXRhci1wb3B1cFwiLFxuICBoYW5kbGVDaGFuZ2VQcm9maWxlQXZhdGFyRm9ybVN1Ym1pdFxuKTtcbmNoYW5nZVByb2ZpbGVBdmF0YXJQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCB1c2VySW5mb05ldyA9IG5ldyBVc2VySW5mbyhcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUF2YXRhclxuKTtcblxuYXBpLmZldGNoVXNlckluZm8oKS50aGVuKChkYXRhKSA9PiB7XG4gIGxldCB1c2VyRGF0YSA9IGRhdGE7XG4gIHVzZXJJbmZvTmV3LnNldFVzZXJJbmZvKHVzZXJEYXRhLm5hbWUsIHVzZXJEYXRhLmFib3V0KTtcbiAgdXNlckluZm9OZXcuc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xufSk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBkYXRhLFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQsXG4gICAgaGFuZGxlQ2FyZExpa2VcbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcbiAgaW1hZ2VQb3BVcC5vcGVuKGRhdGEpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXQoZGF0YSkge1xuICBwcm9maWxlRWRpdFBvcHVwLnNldExvYWRpbmcoJ1NhdmluZy4uLicpO1xuICB1c2VySW5mb05ldy5zZXRVc2VySW5mbyhkYXRhKTtcbiAgYXBpLmVkaXRVc2VySW5mbyhkYXRhKS50aGVuKCgpID0+IHtcbiAgICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XG4gIH0pLmZpbmFsbHkoKCkgPT4gcHJvZmlsZUVkaXRQb3B1cC5zZXRMb2FkaW5nKCdTYXZlJykpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDaGFuZ2VQcm9maWxlQXZhdGFyRm9ybVN1Ym1pdChkYXRhKSB7XG4gIGNoYW5nZVByb2ZpbGVBdmF0YXJQb3BVcC5zZXRMb2FkaW5nKCdTYXZpbmcuLi4nKVxuICB1c2VySW5mb05ldy5zZXRVc2VyQXZhdGFyKGRhdGEubGluayk7XG4gIGFwaS5lZGl0VXNlckF2YXRhcihkYXRhLmxpbmspLnRoZW4oKCkgPT4ge1xuICAgIGNoYW5nZVByb2ZpbGVBdmF0YXJQb3BVcC5jbG9zZSgpO1xuICB9KS5maW5hbGx5KCgpID0+IGNoYW5nZVByb2ZpbGVBdmF0YXJQb3BVcC5zZXRMb2FkaW5nKCdTYXZlJykpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XG4gIGFkZENhcmRQb3BVcC5zZXRMb2FkaW5nKCdTYXZpbmcuLi4nKTtcbiAgY29uc3QgY2FyZFZhbHVlID0gcmVuZGVyQ2FyZChkYXRhKTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkVmFsdWUpO1xuICBhcGlcbiAgICAuYWRkQ2FyZChkYXRhKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGFkZENhcmRQb3BVcC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4gYWRkQ2FyZFBvcFVwLnNldExvYWRpbmcoJ0NyZWF0ZScpKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ29uZmlybVN1Ym1pdChjYXJkKSB7XG4gIGNvbmZpcm1EZWxldGVQb3B1cC5vcGVuKCk7XG4gIGNvbmZpcm1EZWxldGVQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgIGFwaS5kZWxldGVDYXJkKGNhcmQpO1xuICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgIGNvbmZpcm1EZWxldGVQb3B1cC5jbG9zZSgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoY2FyZCkge1xuICBpZiAoIWNhcmQuaXNMaWtlZCkge1xuICAgIGFwaS5saWtlQ2FyZChjYXJkLmNhcmRJZCkudGhlbigoKSA9PiB7XG4gICAgICBjYXJkLnVwZGF0ZUxpa2VTdGF0dXModHJ1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXBpLmRpc2xpa2VDYXJkKGNhcmQuY2FyZElkKS50aGVuKCgpID0+IHtcbiAgICAgIGNhcmQudXBkYXRlTGlrZVN0YXR1cyhmYWxzZSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IExpc3RlbmVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBwcm9maWxlRGF0YSA9IHVzZXJJbmZvTmV3LmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVFZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXMocHJvZmlsZURhdGEpO1xuICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZWRpdC1wb3B1cC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW1wiY3JlYXRlLXBsYWNlLXBvcHVwLWZvcm1cIl0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgYWRkQ2FyZFBvcFVwLm9wZW4oKTtcbn0pO1xuXG5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW1wiY2hhbmdlLXByb2ZpbGUtYXZhdGFyLXBvcHVwLWZvcm1cIl0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgY2hhbmdlUHJvZmlsZUF2YXRhclBvcFVwLm9wZW4oKTtcbn0pO1xuXG4vLyBhcGkubGlrZUNhcmQoYDY1NTI3NjVlNTk3NTczMDAxOTkzMTY0OGApO1xuIiwiaW1wb3J0IHsgYXBpT3B0aW9ucyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxuICAgIHRoaXMuX2Jhc2VVcmwgPSBhcGlPcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGFwaU9wdGlvbnMuZGVmYXVsdEhlYWRlcnM7XG4gICAgdGhpcy5fdXNlclJvdXRlID0gYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgO1xuICAgIHRoaXMuX2NhcmRSb3V0ZSA9IGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYDtcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGFzeW5jIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xuICAgIHJldHVybiBhd2FpdCBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICAvLyBVc2VyIHJvdXRlIG1ldGhvZHNcblxuICBmZXRjaFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KHRoaXMuX3VzZXJSb3V0ZSwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBlZGl0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fdXNlclJvdXRlLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGFib3V0OiBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuICBlZGl0VXNlckF2YXRhcihsaW5rKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fdXNlclJvdXRlfS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogbGluayxcbiAgICAgIH0pLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENhcmQgcm91dGUgbWV0aG9kc1xuICBhc3luYyBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fY2FyZFJvdXRlfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgZmV0Y2hDdXJyZW50Q2FyZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fY2FyZFJvdXRlfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkQ2FyZChjYXJkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fY2FyZFJvdXRlfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBjYXJkLm5hbWUsXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcbiAgICAgIH0pLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX0vJHtjYXJkLmNhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fY2FyZFJvdXRlfS8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlzTGlrZWQ6IHRydWUsXG4gICAgICB9KSxcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBkaXNsaWtlQ2FyZChpZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2NhcmRSb3V0ZX0vJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2VcIik7XG4gICAgdGhpcy5fcHJldmlld1RleHQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19wcmV2aWV3LXRleHRcIlxuICAgICk7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBkYXRhLmxvY2F0aW9uO1xuICAgIHRoaXMuX3ByZXZpZXdUZXh0LnRleHRDb250ZW50ID0gZGF0YS5sb2NhdGlvbjtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNjb25maXJtLWltYWdlLWRlbGV0ZS1wb3B1cC1mb3JtXCJcbiAgICApO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQgPSBoYW5kbGVEZWxldGVDb25maXJtU3VibWl0O1xuICB9XG5cbiAgLy8gdGhpcyBmdW5jdGlvbiBhY2NlcHRzIGFuIGZ1bmN0aW9uIGFzIGFuIGFyZ3VtZW50LCBhbmQgYXNzaWducyBpdCB0byB0aGlzXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjayA9IGFjdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIHNldCBldmVudCBsaXN0ZW5lciB3aXRoIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrIGFzIGl0J3MgaGFuZGxlclxuICAgIC8vIGRvbid0IGZvcmdldCB0byBjYWxsIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjaygpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IocHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZUpvYlNlbGVjdG9yLCBwcm9maWxlQXZhdGFyKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVKb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyxcbiAgICB9O1xuICAgIC8vIGNvbnNvbGUubG9nKHVzZXJEYXRhKTtcbiAgICByZXR1cm4gdXNlckRhdGE7XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX19uYW1lKTtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iXSwibmFtZXMiOlsiYXBpT3B0aW9ucyIsImJhc2VVcmwiLCJkZWZhdWx0SGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImF2YXRhckVkaXRCdXR0b24iLCJmb3JtTGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJBcnJheSIsImZyb20iLCJwcm9maWxlRWRpdFBvcHVwIiwiYWRkTmV3Q2FyZFBvcHVwIiwicHJldmlld0ltYWdlUG9wdXAiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQiLCJoYW5kbGVDYXJkTGlrZSIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiY2FyZElkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNvbmZpcm1TdWJtaXQiLCJfaGFuZGxlQ2FyZExpa2UiLCJfY29uZmlybURlbGV0ZUltYWdlUG9wdXAiLCJfZGF0YSIsImxvY2F0aW9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRMaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkRGVsZXRlSWNvbiIsIl9jYXJkSW1hZ2UiLCJoYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwidXBkYXRlTGlrZVN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJfcmVuZGVyTGlrZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJfZ2V0VGVtcGxhdGUiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiY2FyZExvY2F0aW9uIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbGVtZW50cyIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJfZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2ZvdW5kSW52YWxpZCIsImZvckVhY2giLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiZW5hYmxlU3VibWl0QnV0dG9uIiwiZSIsImRpc2FibGVkIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiX2Nsb3NlQnV0dG9uIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dEl0ZW1zIiwiX3N1Ym1pdEJ1dHRvblZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dEl0ZW0iLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsImlucHV0IiwicmVzZXQiLCJzZXRMb2FkaW5nIiwiYnV0dG9uVmFsdWUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJhcGkiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX3VzZXJSb3V0ZSIsIl9jYXJkUm91dGUiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJmZXRjaFVzZXJJbmZvIiwiaGVhZGVycyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJlZGl0VXNlckluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZWRpdFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaEN1cnJlbnRDYXJkcyIsImFkZENhcmQiLCJjYXJkIiwiZGVsZXRlQ2FyZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJjYXJkU2VjdGlvbiIsImNhcmRzIiwiY2FyZERhdGEiLCJjYXJkRWwiLCJyZW5kZXJDYXJkIiwidXNlckluZm9OZXciLCJzZXRVc2VySW5mbyIsImZpbmFsbHkiLCJpbWFnZVBvcFVwIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3VGV4dCIsImFkZENhcmRQb3BVcCIsImNhcmRWYWx1ZSIsImNvbmZpcm1EZWxldGVQb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsIl9oYW5kbGVTdWJtaXRDYWxsYmFjayIsImNoYW5nZVByb2ZpbGVBdmF0YXJQb3BVcCIsInNldFVzZXJBdmF0YXIiLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUpvYlNlbGVjdG9yIiwicHJvZmlsZUF2YXRhciIsIl9hYm91dCIsIl9hdmF0YXIiLCJnZXRVc2VySW5mbyIsIl9fbmFtZSIsInVzZXJEYXRhIiwicHJvZmlsZURhdGEiXSwic291cmNlUm9vdCI6IiJ9